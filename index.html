<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DocxCheck — Document Similarity Checker</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,300;0,9..144,600;0,9..144,700;0,9..144,900;1,9..144,300;1,9..144,700&display=swap" rel="stylesheet">
<style>
/* ════════════════════════════════════════
   DESIGN TOKENS — Forest Ink + Cream
════════════════════════════════════════ */
:root {
  /* Core palette */
  --forest:    #0d2818;
  --forest-2:  #1a3d28;
  --forest-3:  #245c3a;
  --moss:      #3a7d52;
  --sage:      #7faa8b;
  --sage-lt:   #b8d4c0;
  --cream:     #fcfbfa;
  --cream-2:   #f5f0e8;
  --cream-3:   #eadecd;
  --gold:      #c8a84b;
  --gold-lt:   #e8d08a;
  --ink:       #0a1a0f;
  --white:     #ffffff;

  /* Global Default (Dark Theme for Landing) */
  --bg:        var(--forest);
  --surface:   rgba(245, 240, 232, 0.04);
  --surface-hov: rgba(245, 240, 232, 0.08);
  --border:    rgba(245, 240, 232, 0.12);
  --border-2:  rgba(245, 240, 232, 0.25);
  --text:      var(--cream);
  --muted:     rgba(245, 240, 232, 0.55);

  /* Radii */
  --r-xs: 6px; --r-sm: 10px; --r: 16px;
  --r-lg: 20px; --r-xl: 28px; --r-2xl: 36px;

  /* Semantic Score Colors (Strict) */
  --score-hi: #C62828; /* High Sim 80-100% */
  --score-md: #F9A825; /* Mod Sim 50-79% */
  --score-lo: #2E7D32; /* Low Sim 0-49% */

  /* Shadows */
  --sh-xs: 0 2px 6px rgba(13,40,24,.04);
  --sh-sm: 0 6px 16px rgba(13,40,24,.06);
  --sh-md: 0 12px 32px rgba(13,40,24,.08);
  --sh-lg: 0 24px 64px rgba(13,40,24,.12);
  --sh-glow: 0 0 40px rgba(58,125,82,.15);

  --ease: cubic-bezier(.22,1,.36,1);
  --ease-back: cubic-bezier(.34,1.56,.64,1);
}

/* ════════════════════════════════════════
   LIGHT THEME OVERRIDES (App Pages Only)
════════════════════════════════════════ */
body.light-theme {
  --bg: #f9f7f1; /* Premium warm cream */
  --surface: #ffffff; /* Crisp white cards */
  --surface-hov: #f0ead6; /* Slightly deeper luxury cream for hover */
  --border: rgba(13, 40, 24, 0.08); /* Soft forest tint */
  --border-2: rgba(13, 40, 24, 0.18);
  --text: #0d2818; /* Deep forest ink text */
  --muted: #4a5c50; /* Sage-tinted muted text */
}
body.light-theme .app-bg-elements { background-image: radial-gradient(circle, rgba(13, 40, 24, 0.04) 1px, transparent 1px); }
body.light-theme .glass-panel { box-shadow: 0 8px 24px rgba(13, 40, 24, 0.03); border: 1px solid rgba(13,40,24,0.06); }
body.light-theme .dc-head, body.light-theme .rc-head, body.light-theme .scan-card-head, body.light-theme .scan-h, body.light-theme .hist-table th, body.light-theme .sum-ch { background: #fdfcf9; border-bottom: 1px solid rgba(13,40,24,0.06); }
body.light-theme .rc-head h3, body.light-theme .rc-pct { color: var(--forest); text-shadow: none; }
body.light-theme .rs-v, body.light-theme .lr-text, body.light-theme .dz-t { color: var(--forest); }
body.light-theme .lr-text strong { color: var(--moss); }
body.light-theme .ph-title { color: var(--forest); }
body.light-theme .ph-tag { background: #f0ead6; border-color: rgba(13,40,24,0.08); color: var(--forest); font-weight:600;}
body.light-theme .ph-tag:hover { background: #eadecd; }

/* Light Theme Semantic Overrides */
body.light-theme .v-hi { background: rgba(198,40,40,.1); color: var(--score-hi); border-color: rgba(198,40,40,.3); }
body.light-theme .v-md { background: rgba(249,168,37,.1); color: var(--score-md); border-color: rgba(249,168,37,.3); }
body.light-theme .v-lo { background: rgba(46,125,50,.1); color: var(--score-lo); border-color: rgba(46,125,50,.3); }
body.light-theme .td-sc.hi { color: var(--score-hi); }
body.light-theme .td-sc.md { color: var(--score-md); }
body.light-theme .td-sc.lo { color: var(--score-lo); }

body.light-theme .adv-analytics { background: #fdfaf5; border-color: rgba(13,40,24,0.08); }
body.light-theme .aa-title { color: var(--forest); }
body.light-theme .dz { background: #fdfaf5; border-color: rgba(13,40,24,0.15); }
body.light-theme .dz:hover, body.light-theme .dz.over { background: rgba(200,168,75,0.08); border-color: var(--gold); }
body.light-theme .dz-s span { color: var(--forest); }
body.light-theme .dz-ico { background: #f0ead6; }
body.light-theme .toggle-tabs { background: #f0ead6; border-color: rgba(13,40,24,0.08); }
body.light-theme .tgl { color: var(--muted); }
body.light-theme .tgl.on { background: #ffffff; color: var(--forest); box-shadow: 0 2px 8px rgba(13,40,24,0.05); border: 1px solid rgba(13,40,24,0.05); }
body.light-theme .fpill { background: #ffffff; }
body.light-theme .fpill-name { color: var(--forest); }
body.light-theme .fpill-rm { color: var(--muted); background: #f0ead6; }
body.light-theme .fpill-rm:hover { background: var(--score-hi); color: #fff; }
body.light-theme .input-std { background: #fdfaf5; border-color: rgba(13,40,24,0.12); color: var(--forest); }
body.light-theme .input-std:focus { background: #ffffff; border-color: var(--moss); box-shadow: 0 0 0 3px rgba(58,125,82,0.1); }
body.light-theme .input-std::placeholder { color: rgba(13,40,24,0.35); }
body.light-theme .btn-primary-action { background: var(--forest); color: var(--cream); }
body.light-theme .btn-primary-action:hover { background: var(--forest-2); box-shadow: 0 12px 32px rgba(13,40,24,.25); transform:translateY(-3px); }
body.light-theme .btn-outline { background: #ffffff; color: var(--forest); border-color: rgba(13,40,24,0.15); }
body.light-theme .btn-outline:hover { background: #f0ead6; border-color: var(--forest); }
body.light-theme .tag-r { background: var(--forest); color: var(--white); }
body.light-theme .tag-t { background: rgba(200,168,75,0.25); color: #8a6a1c; }
body.light-theme .lp-lang { background: #ffffff; border-color: rgba(13,40,24,0.12); color: var(--muted); }
body.light-theme .lp-lang:hover { border-color: var(--moss); color: var(--forest); }
body.light-theme .lp-lang.sel { background: var(--forest); color: var(--white); border-color: var(--forest); box-shadow: 0 4px 12px rgba(13,40,24,0.15); }
body.light-theme .live { background: #fdfaf5; border-color: rgba(13,40,24,0.08); }
body.light-theme .live-lbl { color: var(--forest); }
body.light-theme .live-val { color: var(--forest); }
body.light-theme .guest-wall { background: #ffffff; border-color: rgba(13,40,24,0.08); box-shadow: 0 16px 40px rgba(13,40,24,0.06); }
body.light-theme .g-t { color: var(--forest); }
body.light-theme .g-ico { background: #f0ead6; border-color: rgba(13,40,24,0.08); }
body.light-theme .td-d { color: var(--forest); }
body.light-theme .hist-table tr:hover td { background: #fdfaf5; }
body.light-theme .ai-up-inner { background: #fdfaf5; border-color: rgba(13,40,24,0.12); }
body.light-theme .ai-up-inner:hover { background: rgba(200,168,75,0.05); border-color: var(--gold); }
body.light-theme .ai-up-t { color: var(--forest); }
body.light-theme .ai-ico-w { background: #ffffff; }
body.light-theme .ai-mode-toggle { background: #f0ead6; border-color: rgba(13,40,24,0.08); }
body.light-theme .am-btn { color: var(--muted); }
body.light-theme .am-btn.on { background: #ffffff; color: var(--forest); box-shadow: 0 2px 6px rgba(13,40,24,0.06); border: 1px solid rgba(13,40,24,0.04); }
body.light-theme .sb-title { color: var(--forest); }
body.light-theme .sb-text, body.light-theme .kp { color: var(--text); font-weight: 400; }
body.light-theme .kp-n { background: #f0ead6; border-color: rgba(13,40,24,0.08); color: var(--forest); }
body.light-theme .load-ring { border-color: #f0ead6; border-top-color: var(--forest); }
body.light-theme .load-lbl { color: var(--forest); }
body.light-theme .home-title { color: var(--forest); }

/* ════════════════════════════════════════
   RESET + BASE
════════════════════════════════════════ */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
html{scroll-behavior:smooth;}
body{
  font-family:'Poppins', sans-serif;
  background:var(--bg);color:var(--text);
  -webkit-font-smoothing:antialiased;overflow-x:hidden;
  min-height: 100vh;
  transition: background 0.3s var(--ease), color 0.3s var(--ease);
}

.app-bg-elements {
  position: fixed; inset: 0; z-index: -1; pointer-events: none;
  background-image:radial-gradient(circle,rgba(245,240,232,.08) 1px,transparent 1px);
  background-size:32px 32px;
  mask-image:radial-gradient(ellipse 80% 80% at 50% 50%,black 40%,transparent 100%);
  -webkit-mask-image:radial-gradient(ellipse 80% 80% at 50% 50%,black 40%,transparent 100%);
  transition: background-image 0.3s var(--ease);
}

.mid-card, .scan-up-card, .ai-up-inner, .rc, .doc-list-card, .profile-menu { transition: all .22s var(--ease); }
button{cursor:pointer;font-family:inherit;}
input,textarea,select{font-family:inherit;}
::selection{background:rgba(200,168,75,.3);color:var(--cream);}

/* ════════════════════════════════════════
   NAV
════════════════════════════════════════ */
nav{
  position:fixed;top:0;left:0;right:0;z-index:900;
  height:68px;
  background:rgba(13,40,24,.85);
  border-bottom:1px solid rgba(245,240,232,.08);
  display:flex;align-items:center;justify-content:space-between;
  padding:0 36px;
  backdrop-filter:blur(16px);
  transition:all .3s var(--ease);
}
nav.scrolled{box-shadow:var(--sh-sm); background:rgba(13,40,24,.95);}

/* LIGHT NAV */
nav.light-nav { background: rgba(249, 247, 241, 0.85); border-bottom: 1px solid rgba(13,40,24,.06); }
nav.light-nav.scrolled { background: rgba(255, 255, 255, 0.98); box-shadow: 0 4px 20px rgba(13,40,24,.04); }
nav.light-nav .nav-logo { color: var(--forest); }
nav.light-nav .nav-item { color: var(--muted); }
nav.light-nav .nav-item:hover { color: var(--forest); background: rgba(13,40,24,.04); }
nav.light-nav .nav-item.active { color: var(--forest); background: rgba(13,40,24,.08); }
nav.light-nav .nav-ai { color: var(--forest-3); border-color: rgba(58,125,82,.3); }
nav.light-nav .nav-ai.active { background: var(--forest); color: var(--white); border-color: var(--forest); }
nav.light-nav .cls-value { color: var(--forest); background: rgba(13,40,24,.04); border-color: rgba(13,40,24,.08); }
nav.light-nav .cls-value:hover { background: rgba(13,40,24,.08); border-color: rgba(13,40,24,.15); }
nav.light-nav .cls-value::after { border-top-color: var(--forest); }
nav.light-nav .cls-menu { background: rgba(255, 255, 255, 0.98); border-color: rgba(13,40,24,.08); box-shadow: 0 8px 32px rgba(13,40,24,.08); }
nav.light-nav .cls-item { color: var(--forest); }
nav.light-nav .cls-item:hover { background: rgba(13,40,24,.04); }
nav.light-nav .profile-menu { background: rgba(255, 255, 255, 0.98); border-color: rgba(13,40,24,.08); box-shadow: 0 12px 40px rgba(13,40,24,.08); }
nav.light-nav .pm-item { color: var(--forest); }
nav.light-nav .pm-item:hover { background: rgba(13,40,24,.05); color: var(--forest); }
nav.light-nav .pm-div { background: rgba(13,40,24,.08); }

.nav-logo{
  font-family:'Fraunces',serif;font-weight:700;font-size:1.35rem;
  color:var(--cream);cursor:pointer;
  display:flex;align-items:center;gap:10px;letter-spacing:-.02em;
}
.logo-mark{
  width:30px;height:30px;border-radius:8px;
  background:linear-gradient(135deg,var(--gold),var(--sage));
  display:flex;align-items:center;justify-content:center;flex-shrink:0;
  box-shadow:var(--sh-glow);
}
.logo-mark svg{width:16px;height:16px;fill:var(--forest);}

.nav-center{display:flex;align-items:center;gap:6px;}
.nav-item{
  background:none;border:none;
  font-size:.85rem;font-weight:500;
  color:var(--muted);padding:8px 16px;border-radius:var(--r-sm);
  transition:color .2s,background .2s;letter-spacing:.01em;
}
.nav-item:hover{color:var(--cream);background:rgba(245,240,232,.06);}
.nav-item.active{color:var(--gold-lt);background:rgba(200,168,75,.1);font-weight:600;}
.nav-ai{
  background:rgba(58,125,82,.15);color:var(--sage-lt);
  border:1px solid rgba(58,125,82,.3);
  display:flex;align-items:center;gap:6px;
}
.nav-ai:hover{background:rgba(58,125,82,.25);}
.nav-ai.active{background:var(--sage);color:var(--forest);border-color:var(--sage);}

.nav-right{display:flex;align-items:center;gap:16px;}

/* Custom Language Dropdown */
.custom-lang-sel { position: relative; cursor: pointer; }
.cls-value {
  background:rgba(245,240,232,.06);
  border:1px solid var(--border);border-radius:var(--r-sm);
  padding:8px 14px;font-size:.8rem;font-weight:500;
  color:var(--cream); display:flex; align-items:center; gap:8px;
  transition:all .2s;
}
.cls-value::after { content:''; border:4px solid transparent; border-top-color:var(--cream); margin-top:4px; }
.cls-value:hover { border-color:var(--border-2); background:rgba(245,240,232,.1); }
.cls-menu {
  position:absolute; top:calc(100% + 8px); right:0; width:160px;
  background:rgba(20,45,30,.95); backdrop-filter:blur(10px);
  border:1px solid var(--border); border-radius:var(--r);
  box-shadow:var(--sh-md); opacity:0; visibility:hidden; transform:translateY(-8px);
  transition:all .2s var(--ease); overflow:hidden; z-index:100;
}
.custom-lang-sel.open .cls-menu { opacity:1; visibility:visible; transform:translateY(0); }
.cls-item {
  padding:10px 14px; font-size:.8rem; color:var(--cream);
  transition:background .15s;
}
.cls-item:hover { background:rgba(245,240,232,.08); }

/* Profile avatar & menu */
.profile-wrap{position:relative;}
.avatar{width:38px;height:38px;border-radius:50%;cursor:pointer;transition:transform .2s var(--ease),box-shadow .2s var(--ease); border:2px solid var(--border); background:var(--surface);}
.avatar:hover{transform:translateY(-2px) scale(1.05);box-shadow:0 6px 18px rgba(0,0,0,.3); border-color:var(--gold-lt);} 

.profile-menu{
  position:absolute; top:calc(100% + 10px); right:0; width: 220px;
  background:rgba(20,45,30,.98); backdrop-filter:blur(12px);
  border:1px solid var(--border); border-radius:var(--r);
  box-shadow:var(--sh-lg); padding:8px;
  transform-origin:top right;opacity:0;visibility:hidden;transform:translateY(-6px) scale(.98);
  z-index:100;
}
.profile-menu.show{opacity:1;visibility:visible;transform:translateY(0) scale(1);}
.pm-item{
  padding:10px 14px;font-size:.85rem;font-weight:500;color:var(--cream);
  border-radius:var(--r-xs); cursor:pointer; transition:all .15s;
  display: flex; align-items: center; gap: 10px;
}
.pm-item:hover{background:rgba(245,240,232,.08); color:var(--gold-lt);}
.pm-div{height:1px;background:var(--border);margin:6px 0;}

/* ════════════════════════════════════════
   PAGE SYSTEM
════════════════════════════════════════ */
.page{display:none;min-height:100vh;opacity:0;transform:translateY(12px);transition:opacity .34s var(--ease),transform .34s var(--ease);} 
.page.active{display:block;opacity:1;transform:none;}
.page.leaving{opacity:0;transform:translateY(8px);} 
#landing{display:none;}
#landing.active{display:flex;}
@keyframes pgIn{from{opacity:0;transform:translateY(18px);}to{opacity:1;transform:translateY(0);}}

/* ════════════════════════════════════════
   LANDING — THE SHOWSTOPPER
════════════════════════════════════════ */
#landing{
  min-height:100vh;flex-direction:column;
  background:var(--forest);
  position:relative;overflow:hidden;
  color:var(--cream);
}

.orb-layer{position:absolute;inset:0;z-index:0;overflow:hidden;}
.orb{
  position:absolute;border-radius:50%;
  filter:blur(90px);mix-blend-mode:screen;
  animation:orbFloat ease-in-out infinite;opacity:0;
}
.orb1{width:640px;height:640px;background:radial-gradient(circle,rgba(58,125,82,.55),transparent 70%); top:-15%;left:-10%;animation-duration:14s;animation-delay:0s;}
.orb2{width:500px;height:500px;background:radial-gradient(circle,rgba(200,168,75,.28),transparent 70%); top:20%;right:-8%;animation-duration:18s;animation-delay:-6s;}
.orb3{width:400px;height:400px;background:radial-gradient(circle,rgba(36,92,58,.6),transparent 70%); bottom:-5%;left:35%;animation-duration:12s;animation-delay:-3s;}

@keyframes orbFloat{
  0%{opacity:0;transform:translate(0,0) scale(1);}
  5%{opacity:1;}
  33%{transform:translate(30px,-25px) scale(1.06);}
  66%{transform:translate(-20px,20px) scale(.95);}
  95%{opacity:1;}
  100%{opacity:0;transform:translate(0,0) scale(1);}
}

.diag-lines{position:absolute;inset:0;z-index:1;overflow:hidden;}
.dl{
  position:absolute;height:1px;width:200%;
  background:linear-gradient(90deg,transparent,rgba(245,240,232,.06),transparent);
  transform-origin:left center;
}
.dl:nth-child(1){top:22%;transform:rotate(-8deg);animation:dlSlide 12s linear infinite;}
.dl:nth-child(2){top:55%;transform:rotate(-8deg);animation:dlSlide 16s linear infinite .5s;opacity:.6;}
.dl:nth-child(3){top:78%;transform:rotate(-8deg);animation:dlSlide 10s linear infinite 1s;opacity:.4;}
@keyframes dlSlide{from{transform:rotate(-8deg) translateX(-30%);}to{transform:rotate(-8deg) translateX(0);}}

.hero{
  position:relative;z-index:10;
  display:flex;flex-direction:column;align-items:center;
  justify-content:center;flex:1;
  padding:110px 24px 60px;text-align:center;
}

.hero-eyebrow{
  display:inline-flex;align-items:center;gap:10px;
  font-family:'Poppins', sans-serif;
  font-size:.73rem;font-weight:700;letter-spacing:.1em;
  text-transform:uppercase;color:var(--gold-lt);
  border:1px solid rgba(200,168,75,.3);
  border-radius:100px;padding:6px 18px;
  margin-bottom:32px;
  background:rgba(200,168,75,.07);
  animation:fadeUp .8s var(--ease) .15s both;
}
.eye-pulse{width:6px;height:6px;border-radius:50%;background:var(--gold); animation:pulse 2.5s ease infinite;flex-shrink:0;}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1);}50%{opacity:.4;transform:scale(1.6);}}

.hero-h1{
  font-family:'Fraunces',serif;
  font-size:clamp(3.2rem,7vw,6.5rem);
  line-height:1.0;letter-spacing:-.035em;
  color:var(--cream);
  max-width:900px;margin-bottom:6px;
  animation:fadeUp .8s var(--ease) .25s both;
}
.hero-h1 .line2{ font-style:italic;font-weight:300; color:var(--sage-lt);display:block; }
.hero-h1 .accent{
    position:relative;display:inline-block;
    background:linear-gradient(135deg,var(--gold-lt),var(--gold));
    -webkit-background-clip:text;
    background-clip:text; 
    -webkit-text-fill-color:transparent;
}
.hero-sub{
  font-family:'Poppins', sans-serif;
  font-size:1.0625rem;color:rgba(245,240,232,.6);
  line-height:1.8;max-width:540px;
  font-weight:300;margin:22px auto 44px;
  animation:fadeUp .8s var(--ease) .35s both;
}

.hero-cta{
  display:flex;gap:14px;align-items:center;
  flex-wrap:wrap;justify-content:center;
  animation:fadeUp .8s var(--ease) .45s both;
  font-family:'Poppins', sans-serif;
}
.cta-primary{
  display:inline-flex;align-items:center;gap:9px;
  background:var(--cream);color:var(--forest);border:none;
  font-size:.95rem;font-weight:600;letter-spacing:.01em;
  padding:15px 34px;border-radius:var(--r);
  box-shadow:0 4px 20px rgba(0,0,0,.3);
  transition:transform .25s var(--ease-back),box-shadow .25s;
}
.cta-primary:hover{transform:translateY(-3px) scale(1.02);box-shadow:0 8px 32px rgba(0,0,0,.4);}
.cta-ghost{
  display:inline-flex;align-items:center;gap:9px;
  background:rgba(245,240,232,.08);color:var(--cream);
  border:1px solid rgba(245,240,232,.2);
  font-size:.95rem;font-weight:500;
  padding:14px 28px;border-radius:var(--r);
  transition:background .2s,border-color .2s,transform .2s var(--ease);
}
.cta-ghost:hover{background:rgba(245,240,232,.14);border-color:rgba(245,240,232,.35);transform:translateY(-2px);}

@keyframes fadeUp{from{opacity:0;transform:translateY(22px);}to{opacity:1;transform:translateY(0);}}

.hero-stats{
  display:flex;gap:0;margin-top:72px;
  animation:fadeUp .8s var(--ease) .55s both;
  border:1px solid rgba(245,240,232,.1);
  border-radius:var(--r-lg);overflow:hidden;
  background:rgba(245,240,232,.04);
  backdrop-filter: blur(10px);
}
.hs{ padding:26px 40px;text-align:center; border-right:1px solid rgba(245,240,232,.08); flex:1; }
.hs:last-child{border-right:none;}
.hs-num{ font-family:'Fraunces',serif;font-weight:700; font-size:2.4rem;line-height:1;color:var(--cream); letter-spacing:-.03em; }
.hs-num .hs-unit{font-size:1.6rem;}
.hs-lbl{font-family:'Poppins', sans-serif;font-size:.73rem;color:rgba(245,240,232,.45);font-weight:500;margin-top:5px;letter-spacing:.03em;text-transform:uppercase;}

.lang-ticker{
  position:absolute;bottom:0;left:0;right:0;
  height:44px;border-top:1px solid rgba(245,240,232,.08);
  overflow:hidden;display:flex;align-items:center;z-index:10;
  background:rgba(13,40,24,.5);
}
.ticker-track{ display:flex;gap:0;white-space:nowrap; animation:tickerScroll 30s linear infinite; }
.ticker-item{
  font-family:'Poppins', sans-serif;
  font-size:.75rem;font-weight:600;letter-spacing:.04em;
  color:rgba(245,240,232,.4);padding:0 24px;
  border-right:1px solid rgba(245,240,232,.08);
  display:flex;align-items:center;gap:8px;
}
.ticker-item span{color:rgba(245,240,232,.7);}
@keyframes tickerScroll{from{transform:translateX(0);}to{transform:translateX(-50%);}}

.hero-cards{
  position:absolute;right:4%;top:50%;transform:translateY(-50%);
  width:300px;z-index:5;pointer-events:none; display:none;
}
@media(min-width:1200px){.hero-cards{display:block;}}
.hc{
  background:rgba(245,240,232,.06); border:1px solid rgba(245,240,232,.12);
  border-radius:var(--r-lg);padding:18px 20px;
  margin-bottom:14px;backdrop-filter:blur(10px);
}
.hc:nth-child(1){animation:hcFloat1 8s ease-in-out infinite;}
.hc:nth-child(2){transform:translateX(-20px);animation:hcFloat2 9s ease-in-out infinite .5s;}
@keyframes hcFloat1{0%,100%{transform:translateY(0) rotate(-.5deg);}50%{transform:translateY(-12px) rotate(.5deg);}}
@keyframes hcFloat2{0%,100%{transform:translateX(-20px) translateY(0) rotate(1deg);}50%{transform:translateX(-20px) translateY(-8px) rotate(-.5deg);}}
.hc-line{height:6px;background:rgba(245,240,232,.15);border-radius:3px;margin-bottom:7px;}
.hc-line.s{width:55%;}
.hc-line.m{width:78%;}
.hc-bar-row{display:flex;align-items:center;gap:9px;margin-top:12px;}
.hc-bar-bg{flex:1;height:4px;background:rgba(245,240,232,.1);border-radius:2px;}
.hc-bar-fill{height:100%;border-radius:2px;background:linear-gradient(90deg,var(--gold),var(--sage));animation:hcBarAnim 3.5s var(--ease) 1.2s both;}
@keyframes hcBarAnim{from{width:0%;}to{width:73%;}}
.hc-score{font-family:'Fraunces',serif;font-size:.9rem;color:var(--gold-lt);font-weight:600;white-space:nowrap;}

.hero-cards-left{
  position:absolute;left:4%;top:50%;transform:translateY(-40%);
  width:240px;z-index:5;pointer-events:none; display:none;
}
@media(min-width:1400px){.hero-cards-left{display:block;}}
.hcl{
  background:rgba(245,240,232,.05); border:1px solid rgba(245,240,232,.1);
  border-radius:var(--r-lg);padding:16px 18px;
  margin-bottom:12px;backdrop-filter:blur(6px);
  font-family: 'Poppins', sans-serif;
  animation:hcFloat2 11s ease-in-out infinite 1s;
}
.hcl-label{font-size:.65rem;color:rgba(245,240,232,.5);font-weight:600;letter-spacing:.06em;text-transform:uppercase;margin-bottom:8px;}
.hcl-line{height:5px;background:rgba(245,240,232,.12);border-radius:2px;margin-bottom:6px;}
.hcl-langs{display:flex;gap:5px;flex-wrap:wrap;margin-top:10px;}
.hcl-lang{font-size:.62rem;background:rgba(200,168,75,.15);color:var(--gold-lt);border:1px solid rgba(200,168,75,.2);border-radius:3px;padding:2px 7px;font-weight:600;}


/* ════════════════════════════════════════
   GLOBAL APP COMPONENTS (Glass)
════════════════════════════════════════ */
.glass-panel {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  transition: all .2s var(--ease);
}
.glass-panel-hover:hover {
  border-color: var(--border-2);
  box-shadow: var(--sh-md);
  background: var(--surface-hov);
}
.input-std {
  background: var(--surface-hov);
  border: 1.5px solid var(--border);
  color: var(--text);
  border-radius: var(--r-sm);
  transition: all .2s;
  font-family: 'Poppins', sans-serif;
  padding: 12px 16px; width:100%; font-size:.9rem;
}
.input-std:focus {
  border-color: var(--moss);
  background: var(--white);
  outline: none; box-shadow: 0 0 0 4px rgba(58,125,82,.1);
}
.input-std::placeholder { color: var(--muted); opacity: 0.6; }

/* ════════════════════════════════════════
   PRIMARY BUTTON STYLES (Refined Premium)
════════════════════════════════════════ */
.btn-primary-action {
  display: inline-flex; align-items: center; justify-content: center; gap: 12px;
  background: var(--forest); color: var(--white); border: none;
  font-size: 1rem; font-weight: 600; letter-spacing: .02em;
  padding: 16px 48px; border-radius: var(--r-sm);
  box-shadow: 0 8px 24px rgba(13,40,24,.15);
  transition: transform .25s var(--ease-back), box-shadow .25s, background .2s;
  cursor: pointer; min-width: 280px; margin: 0 auto;
}
.btn-primary-action:hover {
  transform: translateY(-3px); box-shadow: 0 12px 32px rgba(13,40,24,.25); background: var(--forest-2);
}
.btn-primary-action:disabled {
  opacity: 0.6; pointer-events: none; transform: none; box-shadow: none;
}

body.light-theme .btn-primary-action { background: var(--forest); color: var(--cream); }
body.light-theme .btn-primary-action:hover { background: var(--forest-2); }

/* Compact Uploaded File Pills */
.file-card-small {
  display: flex; align-items: center; gap: 12px;
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--r-sm); padding: 10px 14px;
  width: 100%; box-shadow: var(--sh-xs);
  animation: pgIn .3s var(--ease);
}
body.light-theme .file-card-small { background: var(--white); }
.file-card-small .fc-ico { font-size: 24px; flex-shrink: 0; }
.file-card-small .fc-info { display: flex; flex-direction: column; flex: 1; overflow: hidden; text-align: left; }
.file-card-small .fc-name { font-size: .85rem; font-weight: 600; color: var(--text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; line-height: 1.3;}
body.light-theme .file-card-small .fc-name { color: var(--forest); }
.file-card-small .fc-sz { font-size: .7rem; color: var(--muted); font-weight: 500; }
.file-card-small .fc-rm {
  background: var(--surface-hov); color: var(--text);
  width: 28px; height: 28px; border-radius: 6px; border: none;
  display: flex; align-items: center; justify-content: center;
  font-size: 14px; cursor: pointer; transition: all .2s; flex-shrink: 0;
}
body.light-theme .file-card-small .fc-rm { background: #f0ead6; color: var(--muted); }
.file-card-small .fc-rm:hover { background: var(--score-hi); color: var(--white); }

/* Upload Zones */
.dz-square {
  width: 100%; height: 100px; min-height: 100px;
  border: 2px dashed var(--border-2);
  border-radius: var(--r-sm);
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  background: var(--surface-hov);
  transition: all 0.2s;
  cursor: pointer; position: relative;
  overflow: hidden;
}
.dz-square:hover, .dz-square.over { border-color: var(--moss); background: rgba(58,125,82,0.04); }
.dz-square input { position:absolute; inset:0; opacity:0; cursor:pointer; width:100%; height:100%; z-index: 5;}
.dz-square .dz-ico { font-size: 28px; margin-bottom: 4px; transition: transform .2s; }
.dz-square:hover .dz-ico { transform: scale(1.1); }
.dz-square .dz-t { font-size: 0.75rem; font-weight: 600; text-align: center; color: var(--text); line-height: 1.2; padding:0 8px;}
body.light-theme .dz-square .dz-t { color: var(--forest); }

.square-grid { display: flex; flex-direction: column; gap: 10px; height: 100%; align-content: start; }

/* ════════════════════════════════════════
   HOME PAGE (Similarity Checker - 2 Column Layout)
════════════════════════════════════════ */
#home{padding-top:100px; position: relative; padding-bottom:80px;}

.home-head{
  max-width:1400px;margin:0 auto;padding:0 36px 30px;
  display:flex;align-items:flex-end;justify-content:space-between;
}
.home-title{font-family:'Fraunces',serif;font-size:2.4rem;letter-spacing:-.025em;margin-bottom:6px; color:var(--forest);}
.home-sub{font-size:1rem;color:var(--muted); font-weight:400;}

/* Restructured 2-column layout: Left fixed width for squares, Right fluid for wide analytics */
.checker {
  max-width: 1400px; margin: 0 auto; padding: 0 36px;
  display: grid;
  grid-template-columns: 340px 1fr;
  gap: 32px;
}

/* ── SLEEK DOCUMENT LANGUAGE CARD (Top Bar) ── */
.lang-panel {
  grid-column: 1 / -1;
  padding: 16px 24px; display: flex; align-items: center; gap: 24px; flex-wrap: wrap;
}
.lp-header { display: flex; align-items: center; gap: 16px; }
.lp-title { font-size:.85rem; font-weight:700; color:var(--forest); text-transform:uppercase; letter-spacing:.05em;}

/* Toggle Switch Auto Detect */
.toggle-switch { display:flex; align-items:center; gap:10px; cursor:pointer; font-size:.85rem; font-weight:600; color:var(--text); user-select:none;}
.toggle-switch input { display:none; }
.slider { width:40px; height:22px; background:var(--border-2); border-radius:20px; position:relative; transition:background .3s; }
.slider::after { content:''; position:absolute; top:2px; left:2px; width:18px; height:18px; background:white; border-radius:50%; transition:transform .3s var(--ease-back), box-shadow .3s; box-shadow:var(--sh-xs); }
.toggle-switch input:checked + .slider { background:var(--moss); }
.toggle-switch input:checked + .slider::after { transform:translateX(18px); }

.lp-langs { flex: 1; display:flex; gap:8px; flex-wrap:wrap; transition:opacity .3s;}
.lp-langs.disabled { opacity: 0.4; pointer-events: none; }
.lp-lang {
  background:var(--surface-hov); border:1px solid var(--border);
  color:var(--muted); padding:6px 16px; border-radius:100px; font-size:.8rem; font-weight:600;
  cursor:pointer; transition:all .2s;
}
.lp-lang:hover { border-color:var(--moss); color:var(--forest); }
.lp-lang.sel { background:var(--forest); color:var(--white); border-color:var(--forest); box-shadow:0 4px 12px rgba(13,40,24,.15);}

.lp-detected { margin-left: auto; font-size:.85rem; color:var(--muted); display:flex; align-items:center; gap:8px; background: var(--surface-hov); padding:8px 16px; border-radius:var(--r-sm); width:fit-content;}
.lp-detected span { font-weight:600; color:var(--forest); }
.pulse-dot { width:8px; height:8px; border-radius:50%; background:var(--moss); animation:pulse 2s ease infinite; }

/* ── SMALL SQUARE DOC CARDS (Left Column Stacked) ── */
.checker-left { display: flex; flex-direction: column; gap: 32px; height: 100%;}

.dc { 
  overflow:hidden; transition:border-color .25s,box-shadow .25s; 
  display: flex; flex-direction: column; 
}
.dc-head {
  padding:20px 24px; border-bottom:1px solid var(--border);
  display:flex; flex-direction: column; align-items:flex-start; gap: 14px;
  background: var(--surface-hov);
}
.dc-label { display:flex; align-items:center; gap:12px; }
.dc-tag { font-size:.7rem; font-weight:700; letter-spacing:.07em; text-transform:uppercase; padding:4px 10px; border-radius:var(--r-xs); }
.tag-r { background:rgba(58,125,82,.1); color:var(--moss); }
.tag-t { background:rgba(200,168,75,.15); color:var(--warn); }
.dc-name { font-size:.95rem; font-weight:600; color:var(--forest); }

/* Compact Toggles */
.toggle-tabs { display:flex; background:var(--border); border-radius:var(--r-sm); padding:4px; gap:4px; width: 100%; }
.tgl { flex: 1; border:none; background:none; font-size:.75rem; font-weight:600; color:var(--muted); padding:8px 14px; border-radius:6px; transition:all .2s; text-align: center;}
.tgl:hover { color:var(--forest); }
.tgl.on { background:var(--white); color:var(--forest); box-shadow:var(--sh-xs); }

.dc-body { padding: 16px 20px; flex: 1; display: flex; flex-direction: column; }
#ref-up, #tgt-up { flex: 1; }

/* Textarea blocks inside small cards */
#ref-tx, #tgt-tx { display: flex; flex-direction: column; height: 100%; flex: 1;}
.dta { flex: 1; resize: none; width:100%; padding: 16px; min-height: 0;}
.ta-foot { display:flex; justify-content:space-between; margin-top:10px; font-size:.8rem; color:var(--muted); font-weight:500; }
.lang-detect-chip {
  display:inline-flex; align-items:center; gap:6px;
  font-size:.75rem; font-weight:600;
  background:rgba(58,125,82,.1); color:var(--moss);
  border:1px solid rgba(58,125,82,.2); border-radius:100px;
  padding:4px 12px; margin-top:10px;
}

/* ── RIGHT COLUMN: WIDE ANALYTICS & ACTION ── */
.checker-right { display: flex; flex-direction: column; gap: 24px; height: 100%;}

/* Ready / Action Card (Stretches to fill right column nicely) */
.action-card { 
  padding: 40px 32px; display:flex; flex-direction:column; align-items:center; text-align:center; gap:16px; justify-content: center; 
  border: 2px dashed var(--border-2); background: var(--surface-hov); height: 100%;
}
.ac-icon { font-size:48px; margin-bottom: 8px; }
.ac-title { font-size: 1.25rem; font-weight:700; color:var(--forest); }
.ac-desc { font-size: .95rem; color: var(--muted); line-height:1.6; max-width: 400px; }

/* Wide Result Card */
.rc {
  overflow:hidden; display:none; opacity:0; transform:translateY(16px);
  transition:opacity .55s var(--ease),transform .55s var(--ease);
}
.rc.show{display:flex; flex-direction: column;}
.rc.vis{opacity:1;transform:translateY(0);}
.rc-head{
  padding:20px 28px;border-bottom:1px solid var(--border);
  display:flex;align-items:center;justify-content:space-between;
  background:var(--surface-hov);
}
.rc-head h3{font-size:.9rem;font-weight:700;color:var(--forest);text-transform:uppercase;letter-spacing:.05em;}
.rc-verdict{font-size:.75rem;font-weight:700;padding:5px 14px;border-radius:100px;letter-spacing:.05em;text-transform:uppercase; transition: all .4s var(--ease);}
.v-hi{background:rgba(198,40,40,.15);color:var(--score-hi);border:1px solid rgba(198,40,40,.4);}
.v-md{background:rgba(249,168,37,.15);color:var(--score-md);border:1px solid rgba(249,168,37,.4);}
.v-lo{background:rgba(46,125,50,.15);color:var(--score-lo);border:1px solid rgba(46,125,50,.4);}

.rc-body{padding:28px 32px; flex: 1; display: flex; flex-direction: column;}
.rc-main{display:flex; flex-direction:row; gap:40px; align-items:center; margin-bottom:32px; text-align:left;}
.rc-pct{font-family:'Fraunces',serif;font-size:6rem;line-height:1;letter-spacing:-.03em;color:var(--forest); min-width: 140px; text-shadow: 0 4px 20px rgba(0,0,0,.15); transition: color .4s var(--ease);}
.rc-d-lbl{font-size:.75rem;color:var(--muted);font-weight:700;text-transform:uppercase;letter-spacing:.05em;margin-bottom:12px;}
.res-bar-t{height:12px;background:var(--border);border-radius:100px;overflow:hidden;margin-bottom:20px; width:100%;}
.res-bar-f{height:100%;border-radius:100px;transition:width 1.1s var(--ease);width:0%;}

.rc-stats{display:flex;gap:16px; width:100%;}
.rs-box{flex:1; background:var(--surface-hov); padding:16px; border-radius:var(--r-sm); border:1px solid var(--border); text-align:center;}
.rs-v{font-size:1.5rem;font-weight:700;color:var(--forest);}
.rs-l{font-size:.7rem;color:var(--muted);font-weight:600;margin-top:6px; text-transform:uppercase;}

/* 3-Column Advanced Analytics inside Result Card */
.adv-analytics { 
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; 
  margin-bottom: 24px; padding: 24px; background:var(--surface-hov); 
  border-radius:var(--r); border:1px solid var(--border); 
}
.aa-title { grid-column: 1 / -1; font-size:.8rem; font-weight:700; color:var(--forest); text-transform:uppercase; letter-spacing:.05em; margin-bottom: 4px; }
.aa-widget { display: flex; flex-direction: column; gap: 10px; }
.aa-header { display: flex; justify-content: space-between; align-items: flex-end; }
.aa-lbl { font-size: .85rem; font-weight:600; color: var(--forest); }
.aa-bar-bg { height: 20px; background: var(--border); border-radius: 10px; overflow: hidden; width: 100%; position: relative; }
.aa-bar-fill { height: 100%; border-radius: 10px; transition: width 1s var(--ease); width: 0%; display: flex; align-items: center; justify-content: flex-end; padding-right: 8px; color: white; font-size: 0.7rem; font-weight: 700; min-width: 2.5rem; text-shadow: 0 1px 2px rgba(0,0,0,0.2); }

.lang-result-row{
  display:flex;align-items:center;gap:12px;
  background:rgba(200,168,75,.1);border:1px solid rgba(200,168,75,.2);
  border-radius:var(--r-sm);padding:14px 18px;margin-bottom:24px;
}
.lr-ico{font-size:1.3rem;}
.lr-text{font-size:.85rem;color:var(--forest);}
.lr-text strong{color:var(--moss);font-weight:700;}

.ph-title{font-size:.8rem;font-weight:700;color:var(--forest);text-transform:uppercase;letter-spacing:.05em;margin-bottom:12px;}
.ph-tags{display:flex;flex-wrap:wrap;gap:8px;}
.ph-tag{
  font-size:.8rem;color:var(--forest);font-weight:500;
  background:var(--white);border:1px solid var(--border);
  border-radius:var(--r-sm);padding:6px 14px;
  box-shadow:var(--sh-xs);
}

/* ════════════════════════════════════════
   WEB SCAN
════════════════════════════════════════ */
#webscan{padding-top:100px; position:relative; padding-bottom:80px;}
.pw{max-width:1000px;margin:0 auto;padding:0 36px;}
.pg-eye{font-size:.8rem;font-weight:700;color:var(--moss);text-transform:uppercase;letter-spacing:.1em;margin-bottom:12px;}
.pg-title{font-family:'Fraunces',serif;font-size:2.4rem;letter-spacing:-.025em;margin-bottom:12px; color:var(--forest);}
.pg-sub{font-size:1rem;color:var(--muted);margin-bottom:40px;line-height:1.7;}

.scan-grid{display:grid;grid-template-columns:1fr 1fr;gap:24px;margin-bottom:40px;}
.scan-up-card{ padding:0;overflow:hidden; }
.scan-card-head{padding:18px 24px;border-bottom:1px solid var(--border);font-size:.85rem;font-weight:700;color:var(--forest);text-transform:uppercase;letter-spacing:.05em; background:var(--surface-hov);}
.scan-card-body{padding:24px;}

/* Webscan specific square container */
#ws-sq-wrap { display: flex; flex-direction: column; justify-content: center; min-height: 120px; }

.scan-rc{overflow:hidden;margin-top:40px;display:none;animation:pgIn .4s var(--ease) both;}
.scan-rc.show{display:block;}
.scan-h{padding:16px 24px;border-bottom:1px solid var(--border);font-size:.8rem;font-weight:700;color:var(--forest);text-transform:uppercase;letter-spacing:.06em;display:flex;justify-content:space-between;background:var(--surface-hov);}
.scan-row{display:flex;align-items:center;gap:16px;padding:18px 24px;border-bottom:1px solid var(--border);transition:background .15s;}
.scan-row:hover{background:var(--surface-hov);}
.scan-row:last-child{border-bottom:none;}
.sr-doc{display:flex;align-items:center;gap:12px;flex:1;}
.sr-ico{width:36px;height:36px;background:var(--cream-2);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0;}
.sr-name{font-size:.9rem;font-weight:600;color:var(--forest);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.sr-bar{width:160px;height:8px;background:var(--border);border-radius:4px;overflow:hidden;}
.sr-bf{height:100%;border-radius:4px;transition:width .85s var(--ease);}
.sr-pct{font-size:.95rem;font-weight:700;width:48px;text-align:right; color:var(--forest);}
.sr-tag{font-size:.7rem;font-weight:700;padding:5px 12px;border-radius:var(--r-xs);width:90px;text-align:center; text-transform:uppercase; letter-spacing:0.04em;}

/* ════════════════════════════════════════
   HISTORY (Profile Context)
════════════════════════════════════════ */
#history{padding-top:100px; position:relative; padding-bottom:80px;}
.guest-wall{max-width:500px;margin:80px auto;text-align:center;padding:48px; border-radius:var(--r-xl); background:var(--white); border:1px solid var(--border); box-shadow:var(--sh-md);}
.g-ico{width:80px;height:80px;background:var(--surface-hov);border-radius:var(--r-xl);display:flex;align-items:center;justify-content:center;font-size:32px;margin:0 auto 24px; border:1px solid var(--border);}
.g-t{font-family:'Fraunces',serif;font-size:2rem;letter-spacing:-.02em;margin-bottom:12px; color:var(--forest);}
.g-s{font-size:.95rem;color:var(--muted);line-height:1.7;margin-bottom:32px;}

.hist-wrap{overflow:hidden;}
.hist-table{width:100%;border-collapse:collapse;}
.hist-table th{text-align:left;font-size:.8rem;font-weight:700;color:var(--forest);text-transform:uppercase;letter-spacing:.06em;padding:16px 24px;background:var(--surface-hov);border-bottom:1px solid var(--border);}
.hist-table td{padding:18px 24px;border-bottom:1px solid var(--border);font-size:.9rem;}
.hist-table tr:last-child td{border-bottom:none;}
.hist-table tr:hover td{background:var(--surface-hov);}
.td-d{font-weight:600;color:var(--forest);}
.td-dt{color:var(--muted);font-size:.85rem;}
.td-sc{font-weight:700;}
.td-sc.hi{color:var(--score-hi);}
.td-sc.md{color:var(--score-md);}
.td-sc.lo{color:var(--score-lo);}
.td-b{font-size:.75rem;font-weight:700;padding:5px 12px;border-radius:var(--r-xs);text-transform:uppercase;letter-spacing:.04em;}

/* ════════════════════════════════════════
   AI SUMMARIZE
════════════════════════════════════════ */
#aisummarize{padding-top:100px; position:relative; padding-bottom:80px;}
.ai-up-card{overflow:hidden;margin-bottom:32px;}
.ai-up-inner{padding:60px 30px;text-align:center;border:2px dashed var(--border-2);margin:24px;border-radius:var(--r-lg);background:var(--surface-hov);position:relative;transition:all .25s; display:flex; flex-direction:column; align-items:center;}
.ai-up-inner:hover{border-color:var(--moss);background:rgba(58,125,82,0.04);}
.ai-ico-w{width:64px;height:64px;margin:0 auto 20px;background:var(--white);border:1px solid var(--border);border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:32px;box-shadow:var(--sh-sm);}
.ai-up-t{font-size:1.1rem;font-weight:700;color:var(--forest);margin-bottom:8px;}
.ai-up-s{font-size:.9rem;color:var(--muted);}

/* Toggle for Document/Image */
.ai-mode-toggle {
  position:absolute;top:20px;right:20px;
  background:var(--white); border:1px solid var(--border);
  border-radius:var(--r-sm); padding:4px; display:flex; gap:4px;
  box-shadow:var(--sh-xs);
}
.am-btn {
  background:transparent; color:var(--muted); border:none;
  padding:8px 16px; border-radius:8px; font-size:.85rem; font-weight:600;
  transition:all .2s; z-index:10; position:relative;
}
.am-btn:hover { color:var(--forest); background:var(--surface-hov);}
.am-btn.on { background:var(--forest); color:var(--white); box-shadow:var(--sh-xs); }

.sum-card{overflow:hidden;display:none; margin-top:40px;}
.sum-card.show{display:block;animation:pgIn .45s var(--ease) both;}
.sum-ch{padding:24px 30px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:16px;background:linear-gradient(135deg,rgba(0,0,0,0.4),rgba(0,0,0,0.2));}
.sum-badge{width:40px;height:40px;background:var(--gold);border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0; color:var(--forest); box-shadow:var(--sh-sm);}
.sum-ct{font-size:1rem;font-weight:700;color:var(--white);}
.sum-cf{font-size:.85rem;color:rgba(255,255,255,.7);margin-top:4px;}
.sum-body{padding:32px;display:grid;grid-template-columns:1fr 1fr;gap:32px;}
.sb-title{font-size:.85rem;font-weight:700;color:var(--forest);text-transform:uppercase;letter-spacing:.07em;margin-bottom:16px;display:flex;align-items:center;gap:12px;}
.sb-title::after{content:'';flex:1;height:1px;background:var(--border);}
.sb-text{font-size:.95rem;color:var(--muted);line-height:1.75; font-weight:400;}
.sb-full{grid-column:1/-1;}
.kp-list{display:flex;flex-direction:column;gap:12px;}
.kp{display:flex;gap:14px;align-items:flex-start;font-size:.95rem;color:var(--muted);line-height:1.6; font-weight:400;}
.kp-n{width:26px;height:26px;border-radius:8px;background:rgba(200,168,75,.15);color:var(--warn);font-size:.8rem;font-weight:700;flex-shrink:0;display:flex;align-items:center;justify-content:center; border:1px solid rgba(200,168,75,.3);}
.load-state{padding:60px;text-align:center;}
.load-ring{width:48px;height:48px;border:3px solid var(--border);border-top-color:var(--moss);border-radius:50%;animation:spin .8s linear infinite;margin:0 auto 20px;}
.load-lbl{font-size:1rem;color:var(--forest);font-weight:600;}

/* ════════════════════════════════════════
   SHARED BUTTON STYLES
════════════════════════════════════════ */
.btn-outline{
  display:inline-flex;align-items:center;gap:8px;
  background:var(--white);color:var(--forest);
  border:1.5px solid var(--border);font-size:.9rem;font-weight:600;
  padding:12px 24px;border-radius:var(--r);
  transition:all .2s; box-shadow:var(--sh-xs);
}
.btn-outline:hover{background:var(--surface-hov); border-color:var(--border-2); box-shadow:var(--sh-sm);}

/* ════════════════════════════════════════
   AUTH MODAL (Interactive & Animated)
════════════════════════════════════════ */
.modal-bg{position:fixed;inset:0;z-index:1000;background:rgba(13,40,24,.7);display:none;align-items:center;justify-content:center;padding:20px;backdrop-filter:blur(8px); -webkit-backdrop-filter:blur(8px);}
.modal-bg.open{display:flex;}
.modal-box{background:var(--white);border:1px solid var(--border);border-radius:var(--r-xl);width:100%;max-width:440px;box-shadow:var(--sh-lg);animation:mIn .4s var(--ease); overflow:hidden; display:flex; flex-direction:column;}
@keyframes mIn{from{opacity:0;transform:scale(.96) translateY(20px);}to{opacity:1;transform:scale(1) translateY(0);}}

.m-header { background:var(--surface-hov); padding:32px 40px 0; border-bottom:1px solid var(--border); }
.m-title{font-family:'Fraunces',serif;font-size:2rem;letter-spacing:-.02em;margin-bottom:8px; color:var(--forest);}
.m-sub{font-size:.9rem;color:var(--muted);margin-bottom:24px;}
.m-tabs{display:flex; gap:20px; margin-bottom: 0; }
.m-tab{background:none; border:none; color:var(--muted); font-size:.95rem; font-weight:600; cursor:pointer; padding:12px 0; transition:color .2s; position:relative;}
.m-tab.active{color:var(--forest); }
.m-tab::after{content:''; position:absolute; bottom:0; left:0; width:100%; height:3px; background:var(--moss); transform:scaleX(0); transition:transform .3s var(--ease); transform-origin:left;}
.m-tab.active::after{transform:scaleX(1);}

.m-body { padding:32px 40px 40px; position:relative; min-height: 320px;}
.m-form-view { position:absolute; inset:0; padding:32px 40px 40px; transition:all .4s var(--ease); opacity:0; pointer-events:none; transform:translateX(20px);}
.m-form-view.active { opacity:1; pointer-events:auto; transform:translateX(0); position:relative; padding:0;}
.m-form-view.exit-left { transform:translateX(-20px); }

.ff{margin-bottom:20px;}
.ff label{display:block;font-size:.85rem;font-weight:600;color:var(--forest);margin-bottom:8px;letter-spacing:.02em;}
.m-acts{display:flex;gap:12px;margin-top:32px;}
.btn-mc{flex:1;background:var(--surface-hov);border:1px solid var(--border);color:var(--forest);font-size:.95rem;font-weight:600;padding:14px;border-radius:var(--r-sm);transition:all .2s;}
.btn-mc:hover{background:var(--border); box-shadow:var(--sh-xs);}
.btn-ms{flex:2;background:var(--forest);color:var(--white);border:none;font-size:.95rem;font-weight:600;padding:14px;border-radius:var(--r-sm);transition:all .2s; box-shadow: var(--sh-sm);}
.btn-ms:hover{transform:translateY(-2px);box-shadow:var(--sh-md); background:var(--forest-2);}

.m-link { display:block; text-align:right; font-size:.8rem; font-weight:600; color:var(--moss); cursor:pointer; margin-top:-10px; transition:color .2s;}
.m-link:hover { color:var(--forest); text-decoration:underline; }

/* Toast */
.toast-area{position:fixed;bottom:32px;right:32px;z-index:1100;display:flex;flex-direction:column;gap:12px;pointer-events:none;}
.toast{display:flex;align-items:center;gap:14px;background:var(--forest);color:var(--white);border-radius:var(--r-sm);padding:16px 24px;font-size:.9rem;font-weight:600;box-shadow:var(--sh-lg);transform:translateX(120%);transition:transform .4s var(--ease),opacity .4s;opacity:0;pointer-events:auto;min-width:280px;letter-spacing:.01em; border:1px solid rgba(255,255,255,.1);}
.toast.in{transform:translateX(0);opacity:1;}
.toast.out{transform:translateX(120%);opacity:0;}
.ts{border-left:4px solid var(--moss);}
.tw{border-left:4px solid var(--warn);}
.ti{border-left:4px solid var(--gold);}

/* Util */
.hidden{display:none!important;}

/* ════════════════════════════════════════
   RESPONSIVE
════════════════════════════════════════ */
@media(max-width:1024px){
  .checker{grid-template-columns:1fr; padding:0 24px;}
  .checker-right { grid-column: 1 / -1; }
  .adv-analytics { grid-template-columns: 1fr; }
  .home-head { padding:0 24px 24px;}
  .rc-main { flex-direction: column; text-align: center; }
  .rc-d-lbl { text-align: center !important; }
}

@media(max-width:800px){
  .scan-grid,.sum-body{grid-template-columns:1fr;}
  .hero-stats{flex-direction:column;gap:0;}
  .hs{border-right:none;border-bottom:1px solid rgba(245,240,232,.08);}
  .hs:last-child{border-bottom:none;}
  nav{padding:0 20px;}
  .nav-center{display:none;} 
  .pw{padding:40px 24px 60px;}
  .rc-stats { flex-wrap: wrap; }
}
</style>
</head>
<body>

<!-- GLOBAL APP BACKGROUND -->
<div class="app-bg-elements"></div>

<!-- NAV -->
<nav id="mainNav" class="dark">
  <div class="nav-logo" onclick="showPage('landing')">
    <div class="logo-mark">
      <svg viewBox="0 0 16 16"><path d="M3 2h10v1H3V2zm0 3h10v1H3V5zm0 3h6v1H3V8zm0 3h8v1H3v-1z"/></svg>
    </div>
    DocxCheck
  </div>
  <div class="nav-center">
    <button class="nav-item active" id="nav-home" onclick="showPage('home')">Home</button>
    <button class="nav-item" id="nav-webscan" onclick="showPage('webscan')">WebScan</button>
    <button class="nav-item nav-ai" id="nav-aisummarize" onclick="showPage('aisummarize')">
      <svg width="12" height="12" viewBox="0 0 12 12" fill="none"><path d="M6 1l1.3 3.5H12L9.1 7l1 3-4.1-2.2L1.9 10l1-3L0 3.5h4.7L6 1z" stroke="currentColor" stroke-width="1.3" stroke-linejoin="round"/></svg>
      AI Summarize
    </button>
  </div>
  <div class="nav-right">
    <!-- Custom Lang Selector -->
    <div class="custom-lang-sel" id="uiLangSel" tabindex="0">
      <div class="cls-value" id="uiLangVal">🌐 EN</div>
      <div class="cls-menu" id="uiLangMenu">
        <div class="cls-item" onclick="setUILang('en', '🌐 EN')">English</div>
        <div class="cls-item" onclick="setUILang('es', '🇪🇸 ES')">Español</div>
        <div class="cls-item" onclick="setUILang('fr', '🇫🇷 FR')">Français</div>
        <div class="cls-item" onclick="setUILang('de', '🇩🇪 DE')">Deutsch</div>
      </div>
    </div>

    <!-- Profile Dropdown -->
    <div class="profile-wrap">
      <img src="https://ui-avatars.com/api/?name=Guest&background=eadecd&color=0d2818&rounded=true" id="profileAvatar" class="avatar" onclick="toggleProfileMenu()">
      <div class="profile-menu" id="profileMenu">
        <!-- Rendered dynamically via JS exactly to: Login/Logout, Doc History, Settings -->
      </div>
    </div>
  </div>
</nav>

<!-- TOAST -->
<div class="toast-area" id="toastArea"></div>

<!-- ═══════════════════════════════════════
     LANDING PAGE
═══════════════════════════════════════ -->
<section id="landing" class="active">
  <div class="orb-layer"><div class="orb orb1"></div><div class="orb orb2"></div><div class="orb orb3"></div></div>
  <div class="diag-lines"><div class="dl"></div><div class="dl"></div><div class="dl"></div></div>

  <!-- Left floating card -->
  <div class="hero-cards-left">
    <div class="hcl">
      <div class="hcl-label">Languages Detected</div>
      <div class="hcl-line"></div><div class="hcl-line s"></div>
      <div class="hcl-langs">
        <span class="hcl-lang">EN</span><span class="hcl-lang">FR</span>
        <span class="hcl-lang">DE</span><span class="hcl-lang">AR</span>
      </div>
    </div>
  </div>

  <div class="hero">
    <div class="hero-eyebrow"><span class="eye-pulse"></span>Multilingual Document Intelligence</div>

    <h1 class="hero-h1">
      <span class="accent">Detect.</span> Compare.
      <span class="line2">Verify Originality.</span>
    </h1>

    <p class="hero-sub">DocxCheck precisely measures similarity across documents in 30+ languages — built for researchers, legal teams, educators, and content professionals worldwide.</p>

    <div class="hero-cta">
      <button class="cta-primary" onclick="showPage('home')">
        <svg width="18" height="18" viewBox="0 0 16 16" fill="none"><path d="M3 8h10M8 3.5l4.5 4.5L8 12.5" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"/></svg>
        Start Checking Free
      </button>
      <button class="cta-ghost" onclick="showPage('aisummarize')">
        <svg width="16" height="16" viewBox="0 0 14 14" fill="none"><path d="M7 1l1.3 3.5H12L9.1 7l1 3L7 8.1 3.9 10l1-3L2 4.5h3.7L7 1z" stroke="currentColor" stroke-width="1.3" stroke-linejoin="round"/></svg>
        Try AI Summarize
      </button>
    </div>

    <!-- Animated stats -->
    <div class="hero-stats">
      <div class="hs"><div class="hs-num" id="c1">0<span class="hs-unit">%</span></div><div class="hs-lbl">Detection Accuracy</div></div>
      <div class="hs"><div class="hs-num" id="c2">0<span class="hs-unit">+</span></div><div class="hs-lbl">Languages Supported</div></div>
      <div class="hs"><div class="hs-num" id="c3">0<span class="hs-unit">K+</span></div><div class="hs-lbl">Docs Analyzed</div></div>
      <div class="hs"><div class="hs-num" id="c4">0<span class="hs-unit">ms</span></div><div class="hs-lbl">Avg. Analysis Time</div></div>
    </div>
  </div>

  <!-- Right floating doc card -->
  <div class="hero-cards">
    <div class="hc">
      <div class="hc-line"></div><div class="hc-line m"></div><div class="hc-line s"></div><div class="hc-line"></div>
      <div class="hc-bar-row">
        <span class="hc-score">73% match</span>
        <div class="hc-bar-bg"><div class="hc-bar-fill"></div></div>
      </div>
    </div>
    <div class="hc">
      <div class="hc-line s"></div><div class="hc-line"></div><div class="hc-line m"></div>
    </div>
  </div>

  <!-- Language ticker -->
  <div class="lang-ticker">
    <div class="ticker-track" id="tickerTrack"></div>
  </div>
</section>

<!-- ═══════════════════════════════════════
     HOME PAGE (Similarity Checker)
═══════════════════════════════════════ -->
<section id="home" class="page">
  <div class="home-head">
    <div>
      <div class="home-title" data-i18n="checker_title">Similarity Checker</div>
      <div class="home-sub" data-i18n="checker_sub">Upload or paste text in both panels, then run analysis</div>
    </div>
    <div class="step-ind">
      <div class="sdots">
        <div class="sdot on" id="sd1"></div>
        <div class="sdot" id="sd2"></div>
        <div class="sdot" id="sd3"></div>
      </div>
      <span data-i18n="step">Step</span> <span id="stepNum">1</span> / 3
    </div>
  </div>

  <!-- 2-COLUMN LAYOUT: Left (Stacked Squares), Right (Wide Analytics) -->
  <div class="checker">
    
    <!-- Top Bar: Document Language Card -->
    <div class="glass-panel lang-panel">
      <div class="lp-header">
        <span class="lp-title" data-i18n="doc_lang">Document Language</span>
        <label class="toggle-switch">
          <input type="checkbox" id="btnAutoLang" checked onchange="toggleAutoLang()">
          <span class="slider"></span> Auto Detect
        </label>
      </div>
      <div class="lp-langs disabled" id="langPills"></div>
      <div class="lp-detected" id="lpDetectedBox">
        <span class="pulse-dot"></span>
        <span data-i18n="auto_detected">Detected Language:</span>
        <span id="detectedLang">Awaiting text...</span>
      </div>
    </div>

    <!-- Column 1: Stacked Source and Target (Small/Square Layout) -->
    <div class="checker-left">

      <!-- Reference Card -->
      <div class="glass-panel dc glass-panel-hover" id="refCard">
        <div class="dc-head">
          <div class="dc-label"><span class="dc-tag tag-r" data-i18n="reference">Reference</span><span class="dc-name" data-i18n="source_doc">Source Document</span></div>
          <div class="toggle-tabs">
            <button class="tgl on" onclick="swMode('ref','upload',this)" data-i18n="upload">Upload</button>
            <button class="tgl" onclick="swMode('ref','text',this)" data-i18n="text">Text</button>
          </div>
        </div>
        <div class="dc-body">
          <div id="ref-up" class="square-grid">
            <label class="dz-square" id="refDz" ondragover="dzOv(event,'refDz')" ondragleave="dzLv('refDz')" ondrop="dzDp(event,'ref')">
              <input type="file" accept=".pdf,.doc,.docx,.txt" onchange="fileIn(event,'ref')">
              <div class="dz-ico">📄</div>
              <div class="dz-t" data-i18n="drop_here">Upload Reference</div>
            </label>
            <div id="refPill" class="hidden"></div>
          </div>
          <div id="ref-tx" class="hidden">
            <textarea class="input-std dta" id="refTa" data-i18n-ph="ref_placeholder" placeholder="Paste reference document text…" oninput="txtIn('ref')"></textarea>
            <div class="ta-foot"><span data-i18n="plain_text">Plain text format</span><span id="refCc">0 chars</span></div>
            <div id="refLangChip" class="hidden"><span class="lang-detect-chip">🌐 <span id="refDetectedLang">—</span></span></div>
          </div>
        </div>
      </div>

      <!-- Target Card (Below Source) -->
      <div class="glass-panel dc glass-panel-hover" id="tgtCard">
        <div class="dc-head">
          <div class="dc-label"><span class="dc-tag tag-t" data-i18n="target">Target</span><span class="dc-name" data-i18n="analyze_doc">Documents to Analyze</span></div>
          <div class="toggle-tabs">
            <button class="tgl on" onclick="swMode('tgt','upload',this)" data-i18n="upload">Upload</button>
            <button class="tgl" onclick="swMode('tgt','text',this)" data-i18n="text">Text</button>
          </div>
        </div>
        <div class="dc-body" style="overflow-y: auto;">
          <div id="tgt-up" class="square-grid" id="tgtFileGrid">
            <!-- Dynamic File Cards will render here, plus the add button -->
            <label class="dz-square" id="tgtDz" ondragover="dzOv(event,'tgtDz')" ondragleave="dzLv('tgtDz')" ondrop="dzDp(event,'tgt')">
              <input type="file" multiple accept=".pdf,.doc,.docx,.txt" onchange="tgtFileIn(event)">
              <div class="dz-ico">🎯</div>
              <div class="dz-t">Add Target</div>
            </label>
          </div>
          <div id="tgt-tx" class="hidden">
            <textarea class="input-std dta" id="tgtTa" data-i18n-ph="tgt_placeholder" placeholder="Paste target document text to compare…" oninput="txtIn('tgt')"></textarea>
            <div class="ta-foot"><span data-i18n="compared_to">Compared against reference</span><span id="tgtCc">0 chars</span></div>
            <div id="tgtLangChip" class="hidden"><span class="lang-detect-chip">🌐 <span id="tgtDetectedLang">—</span></span></div>
            <div class="live" id="liveSim">
              <div class="live-row"><span class="live-lbl" data-i18n="live_sim">Live Similarity</span><span class="live-val" id="liveV">—</span></div>
              <div class="res-bar-t" style="height:12px; margin-bottom:0;"><div class="res-bar-f" id="liveF" style="padding-right:0;"></div></div>
            </div>
          </div>
        </div>
      </div>

    </div>
    
    <!-- Column 2: Wide Action & Analytics -->
    <div class="checker-right">
      
      <!-- Action Card -->
      <div class="glass-panel action-card" id="actionCard">
        <div class="ac-icon">🔍</div>
        <h3 class="ac-title">Ready for Analysis</h3>
        <p class="ac-desc">Upload both reference and target documents to begin similarity check. The detailed report will appear here.</p>
        <button class="btn-primary-action" id="aBtn" onclick="doAnalyze()" disabled style="margin-top:24px;">
          <span id="aBtnLbl" data-i18n="analyze_btn">Analyze Similarity</span>
        </button>
        <div class="a-hint" id="aHint" data-i18n="both_required" style="margin-top:16px;">Both documents are required</div>
      </div>

      <!-- Result Card (Large and Wide) -->
      <div class="glass-panel rc" id="resultCard">
        <div class="rc-head">
          <h3 data-i18n="analysis_report">Analysis Report</h3>
          <span class="rc-verdict" id="rcVerdict"></span>
        </div>
        <div class="rc-body">
          <div id="langResultRow" class="lang-result-row hidden">
            <span class="lr-ico">🌐</span>
            <span class="lr-text" id="langResultText"></span>
          </div>
          
          <div class="rc-main">
            <div class="rc-pct" id="rcPct">—</div>
            <div style="flex:1;">
              <div class="rc-d-lbl" data-i18n="overall_sim" style="text-align:left;">Overall Document Similarity</div>
              <div class="res-bar-t"><div class="res-bar-f" id="rcBar"></div></div>
              <div class="rc-stats">
                <div class="rs-box"><div class="rs-v" id="rsW">0</div><div class="rs-l" data-i18n="matched_words">Matched</div></div>
                <div class="rs-box"><div class="rs-v" id="rsT">0</div><div class="rs-l" data-i18n="total_words">Total Words</div></div>
                <div class="rs-box"><div class="rs-v" id="rsP">0</div><div class="rs-l" data-i18n="common_phrases">Phrases</div></div>
              </div>
            </div>
          </div>

          <!-- Advanced Analytics (3 columns with percentage on bars) -->
          <div class="adv-analytics" id="advAnalytics">
            <div class="aa-title">Structural Breakdown</div>
            <div class="aa-widget">
              <div class="aa-header"><span class="aa-lbl">Exact Matches</span><span class="aa-val" id="aaExactV">0%</span></div>
              <div class="aa-bar-bg"><div class="aa-bar-fill" id="aaExact" style="background:var(--score-hi)"></div></div>
            </div>
            <div class="aa-widget">
              <div class="aa-header"><span class="aa-lbl">Paraphrase Index</span><span class="aa-val" id="aaParaV">0%</span></div>
              <div class="aa-bar-bg"><div class="aa-bar-fill" id="aaPara" style="background:var(--score-md)"></div></div>
            </div>
            <div class="aa-widget">
              <div class="aa-header"><span class="aa-lbl">Structural Sim</span><span class="aa-val" id="aaStructV">0%</span></div>
              <div class="aa-bar-bg"><div class="aa-bar-fill" id="aaStruct" style="background:var(--score-lo)"></div></div>
            </div>
          </div>

          <div id="phBlock">
            <div class="ph-title" data-i18n="matched_phrases">Top Matched Phrases</div>
            <div class="ph-tags" id="phTags"></div>
          </div>
        </div>
      </div>

    </div>
  </div>
</section>

<!-- ═══════════════════════════════════════
     WEB SCAN
═══════════════════════════════════════ -->
<section id="webscan" class="page">
  <div class="pw">
    <div class="pg-eye" data-i18n="webscan_eye">Web Scanner</div>
    <div class="pg-title" data-i18n="webscan_title">Document Cross-Check</div>
    <p class="pg-sub" data-i18n="webscan_sub">Upload two documents to compare them against each other. Ideal for checking drafts, submissions, and repurposed content.</p>

    <div class="scan-grid">
      <div class="glass-panel scan-up-card">
        <div class="scan-card-head" data-i18n="primary_doc">Upload Document</div>
        <div class="scan-card-body" id="ws-sq-wrap">
          <label class="dz-square" id="wsDz1" ondragover="dzOv(event,'wsDz1')" ondragleave="dzLv('wsDz1')" ondrop="wsDrop(event,1)">
            <input type="file" accept=".pdf,.doc,.docx,.txt" onchange="wsFile(event,1)">
            <div class="dz-ico">📄</div>
            <div class="dz-t">Primary Doc</div>
          </label>
          <div id="wsPill1" class="hidden"></div>
        </div>
      </div>
      <div>
        <div class="glass-panel scan-up-card" style="height:100%;">
          <div class="scan-card-head">Scan Details</div>
          <div class="scan-card-body" id="wsDetails">
            <div class="ph-title">Document Properties</div>
            <div id="wsDetailsInner" class="ph-tags">Awaiting document upload</div>
          </div>
        </div>
      </div>
    </div>

    <div style="text-align: center; margin-top: 40px;">
      <button class="btn-primary-action" onclick="doScan()">
        <svg width="18" height="18" viewBox="0 0 16 16" fill="none"><circle cx="7" cy="7" r="4.5" stroke="currentColor" stroke-width="1.6"/><path d="M10.5 10.5L14 14" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/></svg>
        <span data-i18n="run_scan">Run Web Scan</span>
      </button>
    </div>

    <div class="glass-panel scan-rc" id="scanCard">
      <div class="scan-h"><span data-i18n="document">Detected Source</span><span data-i18n="match_score">Match Score</span></div>
      <div id="scanRows"></div>
    </div>
  </div>
</section>

<!-- ═══════════════════════════════════════
     HISTORY
═══════════════════════════════════════ -->
<section id="history" class="page">
  <div class="pw">
    <div class="pg-eye" data-i18n="history_eye">Doc History</div>
    <div class="pg-title" data-i18n="history_title">Past Analyses</div>
    <p class="pg-sub" data-i18n="history_sub">A complete record of all document comparisons made with your account.</p>

    <div id="guestW" class="guest-wall">
      <div class="g-ico">🔒</div>
      <div class="g-t" data-i18n="guest_title">Sign in to view history</div>
      <p class="g-s" data-i18n="guest_sub">Your document history is stored securely with your account. Create a free account to access all past analyses.</p>
      <button class="btn-primary-action" onclick="openAuthModal('signup')"><span data-i18n="create_account">Create Free Account</span></button>
    </div>

    <div id="histW" class="hidden">
      <div class="glass-panel hist-wrap">
        <table class="hist-table">
          <thead><tr>
            <th data-i18n="documents">Documents</th>
            <th data-i18n="date">Date</th>
            <th data-i18n="language">Language</th>
            <th data-i18n="score">Score</th>
            <th data-i18n="verdict">Verdict</th>
          </tr></thead>
          <tbody id="histBody"></tbody>
        </table>
      </div>
    </div>
  </div>
</section>

<!-- ═══════════════════════════════════════
     AI SUMMARIZE
═══════════════════════════════════════ -->
<section id="aisummarize" class="page">
  <div class="pw">
    <div class="pg-eye" data-i18n="ai_eye">AI Summarize</div>
    <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px;">
      <div class="pg-title" data-i18n="ai_title" style="margin:0;">Intelligent Summary</div>
      <button class="btn-outline" id="aiSettingsBtn" onclick="toggleAiSettings()">⚙️ Settings</button>
    </div>
    <p class="pg-sub" data-i18n="ai_sub">Upload any document or image and receive a structured AI-generated summary with key insights.</p>

    <div class="glass-panel ai-up-card">
      <div class="ai-up-inner" ondragover="event.preventDefault()" ondrop="aiDrop(event)">
        
        <!-- Segmented Toggle -->
        <div class="ai-mode-toggle">
          <button class="am-btn on" id="amDoc" onclick="setAiMode('doc')">📄 Document</button>
          <button class="am-btn" id="amImage" onclick="setAiMode('image')">🖼️ Image</button>
        </div>

        <!-- Document Mode Area -->
        <div id="aiDocArea" style="width: 100%; max-width:240px; margin:24px auto 0;">
          <label class="dz-square" style="border-color:var(--moss);">
            <input type="file" accept=".pdf,.docx,.txt" id="aiInp" onchange="aiFile(event)">
            <div class="dz-ico" style="font-size:36px;">📄</div>
            <div class="dz-t" data-i18n="drop_doc">Upload Doc</div>
          </label>
        </div>
        
        <!-- Image Mode Area -->
        <div id="aiImageArea" class="hidden" style="width: 100%; max-width:240px; margin:24px auto 0;">
           <label class="dz-square" style="border-color:var(--warn);">
            <input type="file" accept="image/*" id="aiImgInp" onchange="aiImageFile(event)">
            <div class="dz-ico" style="font-size:36px;">🖼️</div>
            <div class="dz-t">Upload Image</div>
          </label>
        </div>
        
        <div id="aiPill" class="hidden" style="width: 100%; max-width:280px; margin:24px auto 0;"></div>
      </div>
    </div>
    
    <div id="aiSettingsPanel" class="glass-panel hidden" style="padding:20px; margin-bottom:24px; max-width:520px;">
      <label style="display:flex;align-items:center;gap:10px; font-size:.9rem; font-weight:600; color:var(--forest);">
        <input type="checkbox" id="aiImageOptChk" onchange="aiImageOption=this.checked" style="width:18px;height:18px;accent-color:var(--moss);"> 
        Enable Advanced OCR for Documents
      </label>
      <div style="font-size:.85rem;color:var(--muted);margin-top:8px">When enabled, the AI will attempt to read text embedded inside images within your PDFs or DOCX files.</div>
    </div>

    <div style="text-align: center; margin-top: 40px; margin-bottom: 30px;">
      <button class="btn-primary-action" onclick="doSummarize()">
        <svg width="18" height="18" viewBox="0 0 14 14" fill="none"><path d="M7 1l1.3 3.5H12L9.1 7l1 3-3.1-1.9L3.9 10l1-3L2 4.5h3.7L7 1z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/></svg>
        <span data-i18n="gen_summary">Generate AI Summary</span>
      </button>
    </div>

    <div class="glass-panel sum-card" id="sumCard">
      <div class="sum-ch">
        <div class="sum-badge">✦</div>
        <div><div class="sum-ct" data-i18n="ai_summary">AI Generated Summary</div><div class="sum-cf" id="sumDoc">—</div></div>
      </div>
      <div id="sumInner">
        <div class="load-state" id="sumLoad"><div class="load-ring"></div><div class="load-lbl" data-i18n="analyzing">Analyzing content…</div></div>
        <div class="sum-body hidden" id="sumBody">
          <div class="sb-full"><div class="sb-title" data-i18n="overview">Overview</div><p class="sb-text" id="sumOv"></p></div>
          <div class="sb"><div class="sb-title" data-i18n="key_points">Key Points</div><div class="kp-list" id="sumKP"></div></div>
          <div class="sb"><div class="sb-title" data-i18n="conclusion">Conclusion</div><p class="sb-text" id="sumCo"></p></div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- AUTH MODAL -->
<div class="modal-bg" id="mBg" onclick="bgCl(event)">
  <div class="modal-box">
    <div class="m-header">
      <div class="m-title" id="mTitle" data-i18n="welcome_back">Welcome back</div>
      <p class="m-sub" id="mSub" data-i18n="sign_in_sub">Sign in to your DocxCheck account</p>
      
      <div class="m-tabs">
        <button class="m-tab active" id="tabLogin" onclick="switchModalTab('login')">Sign In</button>
        <button class="m-tab" id="tabSignup" onclick="switchModalTab('signup')">Sign Up</button>
      </div>
    </div>
    
    <div class="m-body">
      <!-- Login View -->
      <div class="m-form-view active" id="viewLogin">
        <div class="ff"><label data-i18n="email">Email address</label><input type="email" class="input-std" placeholder="you@example.com"></div>
        <div class="ff"><label data-i18n="password">Password</label><input type="password" class="input-std" placeholder="••••••••"></div>
        <a class="m-link">Forgot password?</a>
        <div class="m-acts">
          <button class="btn-mc" onclick="closeModal()" data-i18n="cancel">Cancel</button>
          <button class="btn-ms" onclick="doLogin()">Sign in</button>
        </div>
      </div>
      
      <!-- Signup View -->
      <div class="m-form-view" id="viewSignup">
        <div class="ff"><label>Full Name</label><input type="text" class="input-std" placeholder="John Doe"></div>
        <div class="ff"><label data-i18n="email">Email address</label><input type="email" class="input-std" placeholder="you@example.com"></div>
        <div class="ff"><label data-i18n="password">Create Password</label><input type="password" class="input-std" placeholder="••••••••"></div>
        <div class="m-acts" style="margin-top:24px;">
          <button class="btn-mc" onclick="closeModal()" data-i18n="cancel">Cancel</button>
          <button class="btn-ms" onclick="doLogin()">Create Account</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
/* ════════════════════════════════════════
   I18N — TRANSLATIONS
════════════════════════════════════════ */
const LANGS = {
  en:{name:'EN',fullname:'English',flag:'🇬🇧'}, es:{name:'ES',fullname:'Español',flag:'🇪🇸'},
  fr:{name:'FR',fullname:'Français',flag:'🇫🇷'}, de:{name:'DE',fullname:'Deutsch',flag:'🇩🇪'},
  ar:{name:'AR',fullname:'العربية',flag:'🇸🇦'}, zh:{name:'ZH',fullname:'中文',flag:'🇨🇳'},
  hi:{name:'HI',fullname:'हिन्दी',flag:'🇮🇳'}, ru:{name:'RU',fullname:'Русский',flag:'🇷🇺'}
};

const T = {
  en:{
    login:'Log in',checker_title:'Similarity Checker',checker_sub:'Upload or paste text in both panels, then run analysis',
    step:'Step',doc_lang:'Language:',auto_detected:'Detected:',
    reference:'Reference',source_doc:'Source Document',target:'Target',analyze_doc:'Documents to Analyze',
    upload:'Upload',text:'Text',drop_here:'Upload Reference',click_browse:'Click to browse',
    plain_text:'Plain text or structured content',compared_to:'Compared against the reference',
    live_sim:'Live Similarity',analyze_btn:'Analyze Similarity',both_required:'Both documents are required',
    analysis_report:'Analysis Report',overall_sim:'Overall Document Similarity',
    matched_words:'Matched',total_words:'Total Words',common_phrases:'Phrases',
    matched_phrases:'Top Matched Phrases',
    webscan_eye:'Web Scanner',webscan_title:'Document Cross-Check',
    webscan_sub:'Upload two documents to compare them. Ideal for checking drafts, submissions, and repurposed content.',
    primary_doc:'Upload Document',
    run_scan:'Run Web Scan',document:'Detected Source',match_score:'Match Score',
    history_eye:'Doc History',history_title:'Past Analyses',
    history_sub:'A complete record of all document comparisons made with your account.',
    guest_title:'Sign in to view history',guest_sub:'Your document history is stored securely. Create a free account to access all past analyses.',
    create_account:'Create Free Account',documents:'Documents',date:'Date',language:'Language',score:'Score',verdict:'Verdict',
    ai_eye:'AI Summarize',ai_title:'Intelligent Summary',
    ai_sub:'Upload any document or image and receive a structured AI-generated summary with key insights.',
    drop_doc:'Upload Doc',formats:'PDF, DOCX, or TXT supported',
    gen_summary:'Generate AI Summary',ai_summary:'AI Generated Summary',analyzing:'Analyzing content…',
    overview:'Overview',key_points:'Key Points',conclusion:'Conclusion',
    welcome_back:'Welcome back',sign_in_sub:'Sign in to your DocxCheck account',
    email:'Email address',password:'Password',cancel:'Cancel',sign_in:'Sign in',
    ref_placeholder:'Paste reference document text…',tgt_placeholder:'Paste target document text to compare…',
  }
};
Object.keys(T).forEach(l => { if(l!=='en') T[l] = {...T.en,...T[l]}; });

/* ════════════════════════════════════════
   UI LANG DROPDOWN
════════════════════════════════════════ */
let uiLang = 'en';
const langSel = document.getElementById('uiLangSel');
const langVal = document.getElementById('uiLangVal');

langSel.addEventListener('click', (e) => { e.stopPropagation(); langSel.classList.toggle('open'); });
document.addEventListener('click', () => langSel.classList.remove('open'));

function setUILang(code, label) {
  uiLang = code;
  langVal.textContent = label;
  const t = T[code] || T.en;
  document.querySelectorAll('[data-i18n]').forEach(el => { if(t[el.dataset.i18n]) el.textContent = t[el.dataset.i18n]; });
  document.querySelectorAll('[data-i18n-ph]').forEach(el => { if(t[el.dataset.i18nPh]) el.placeholder = t[el.dataset.i18nPh]; });
}

/* ════════════════════════════════════════
   DOCUMENT LANG SELECTION
════════════════════════════════════════ */
const DOC_LANGS = ['en','es','fr','de','zh'];
let isAutoLang = true;
let manualLang = 'en';

function buildDocLangPills() {
  const container = document.getElementById('langPills');
  container.innerHTML = DOC_LANGS.map(code =>
    `<button class="lp-lang" onclick="setManualLang('${code}')">${LANGS[code].name}</button>`
  ).join('');
}
function toggleAutoLang() {
  const chk = document.getElementById('btnAutoLang');
  isAutoLang = chk.checked;
  document.getElementById('langPills').classList.toggle('disabled', isAutoLang);
  if(isAutoLang) {
    document.querySelectorAll('.lp-lang').forEach(b => b.classList.remove('sel'));
    updateDetectedLangDisplay();
  } else {
    setManualLang(manualLang || 'en');
  }
}
function setManualLang(code) {
  manualLang = code;
  document.querySelectorAll('.lp-lang').forEach(b => b.classList.toggle('sel', b.textContent === LANGS[code].name));
  document.getElementById('detectedLang').textContent = `Set to ${LANGS[code].fullname}`;
  document.getElementById('lpDetectedBox').style.opacity = '0.5';
}

function updateDetectedLangDisplay(code = null) {
  if(!isAutoLang) return;
  const box = document.getElementById('lpDetectedBox');
  const txt = document.getElementById('detectedLang');
  box.style.opacity = '1';
  txt.textContent = code ? `${LANGS[code]?.flag||''} ${LANGS[code]?.fullname||code}` : 'Awaiting text...';
}

function detectLang(text) {
  if(!text || text.trim().length < 10) return null;
  if(/[\u0600-\u06FF]/.test(text)) return 'ar';
  if(/[\u4E00-\u9FFF]/.test(text)) return 'zh';
  const words = text.toLowerCase().split(/\s+/);
  const es = words.filter(w=>['el','la','los','las','de','en','y','que','es'].includes(w)).length;
  const fr = words.filter(w=>['le','la','les','de','et','en','un','une','est'].includes(w)).length;
  const de = words.filter(w=>['der','die','das','und','ist','von','zu','mit','ein'].includes(w)).length;
  const max = Math.max(es,fr,de);
  if(max > 2) { if(max===es) return 'es'; if(max===fr) return 'fr'; return 'de'; }
  return 'en';
}

/* ════════════════════════════════════════
   NAV & PAGE THEME LOGIC
════════════════════════════════════════ */
let loggedIn = false;
let hasAnalyzed = false;
let modes = {ref:'upload',tgt:'upload'};
let fileObjs = {ref:null};
let tgtFiles = []; 
let wsFiles = {1:null};
let aiMode = 'doc';
let aiImageOption = false;
let aiFileObj = null;
let histData = [];

window.addEventListener('scroll', () => {
  document.getElementById('mainNav').classList.toggle('scrolled', scrollY > 8);
});

function showPage(id) {
  const prev = document.querySelector('.page.active, #landing.active');
  if(prev && prev.id !== id){
    prev.classList.remove('active');
    prev.classList.add('leaving');
    setTimeout(()=>{ try{ prev.classList.remove('leaving'); prev.style.display=''; }catch(e){} }, 360);
  }

  const el = document.getElementById(id);
  if(!el) return;

  if(id === 'landing') {
    el.style.display = 'flex';
    document.body.classList.remove('light-theme');
    document.getElementById('mainNav').classList.remove('light-nav');
    document.getElementById('mainNav').classList.add('dark');
  } else {
    el.style.display = 'block';
    document.body.classList.add('light-theme');
    document.getElementById('mainNav').classList.add('light-nav');
    document.getElementById('mainNav').classList.remove('dark');
  }

  requestAnimationFrame(()=> requestAnimationFrame(()=>{ el.classList.add('active'); el.classList.remove('leaving'); }));

  document.querySelectorAll('.nav-item').forEach(b=>b.classList.remove('active'));
  const nb = document.getElementById('nav-'+id);
  if(nb) nb.classList.add('active');

  if(id==='history') renderHistory();
  window.scrollTo({top:0,behavior:'smooth'});
}

/* ════════════════════════════════════════
   LANDING ANIMATIONS
════════════════════════════════════════ */
function animateCount(el, target, suffix) {
  let start = null;
  const step = ts => {
    if(!start) start = ts;
    const p = Math.min((ts-start)/1800, 1);
    el.innerHTML = Math.round((1-Math.pow(1-p,3))*target)+'<span class="hs-unit">'+suffix+'</span>';
    if(p<1) requestAnimationFrame(step);
  };
  requestAnimationFrame(step);
}
function startCounters() {
  animateCount(document.getElementById('c1'), 99, '%');
  animateCount(document.getElementById('c2'), 30, '+');
  animateCount(document.getElementById('c3'), 50, 'K+');
  animateCount(document.getElementById('c4'), 800, 'ms');
}
const TICKER_LANGS = [{lang:'English',sample:'Document analysis complete'},{lang:'Español',sample:'Análisis de documentos'},{lang:'Français',sample:'Analyse de document'},{lang:'Deutsch',sample:'Dokumentenanalyse'},{lang:'العربية',sample:'تحليل المستندات'},{lang:'中文',sample:'文档分析完成'}];
function buildTicker() {
  const items = [...TICKER_LANGS,...TICKER_LANGS,...TICKER_LANGS].map(l => `<div class="ticker-item">${l.lang} <span>${l.sample}</span></div>`).join('');
  document.getElementById('tickerTrack').innerHTML = items;
}
const landingObs = new IntersectionObserver(entries => {
  if(entries[0].isIntersecting) { setTimeout(startCounters, 600); landingObs.disconnect(); }
},{threshold:.3});
landingObs.observe(document.getElementById('landing'));

/* ════════════════════════════════════════
   STEP INDICATOR & MODES
════════════════════════════════════════ */
function setStep(n) {
  document.getElementById('stepNum').textContent = n;
  [1,2,3].forEach(i=>document.getElementById('sd'+i).classList.toggle('on',i<=n));
}

function swMode(doc, mode, btn) {
  modes[doc] = mode;
  btn.closest('.toggle-tabs').querySelectorAll('.tgl').forEach(b=>b.classList.remove('on'));
  btn.classList.add('on');
  document.getElementById(doc+'-up').classList.toggle('hidden', mode!=='upload');
  document.getElementById(doc+'-tx').classList.toggle('hidden', mode!=='text');
  
  if(mode === 'upload' && doc === 'tgt') { document.getElementById(doc+'-up').style.display = 'flex'; }
  if(mode === 'upload' && doc === 'ref') { document.getElementById(doc+'-up').style.display = 'flex'; }

  checkReady();
}

/* ════════════════════════════════════════
   DRAG & DROP / FILE UPLOADS
════════════════════════════════════════ */
function dzOv(e,id){e.preventDefault();document.getElementById(id).classList.add('over');}
function dzLv(id){document.getElementById(id).classList.remove('over');}
function dzDp(e,doc){
  e.preventDefault(); dzLv(doc+'Dz');
  if(e.dataTransfer.files.length) {
    if(doc === 'tgt') { for(let f of e.dataTransfer.files) handleTgtFile(f); }
    else { setFile(e.dataTransfer.files[0], doc); }
  }
}
function fileIn(e,doc){
  if(e.target.files.length) setFile(e.target.files[0], doc);
  e.target.value = '';
}

function setFile(f, doc) {
  fileObjs[doc] = f;
  document.getElementById(doc+'Dz').style.display = 'none';
  const pill = document.getElementById(doc+'Pill');
  pill.classList.remove('hidden');
  
  pill.innerHTML = `
    <div class="file-card-small">
      <div class="fc-ico">📄</div>
      <div class="fc-info">
        <div class="fc-name" title="${f.name}">${f.name}</div>
        <div class="fc-sz">${(f.size/1024).toFixed(0)} KB</div>
      </div>
      <button class="fc-rm" onclick="clrFile('${doc}')">✕</button>
    </div>
  `;
    
  toast(f.name+' loaded','success');
  checkReady();
  setStep(fileObjs.ref || tgtFiles.length ? 2 : 1);
}

function clrFile(doc) {
  fileObjs[doc]=null;
  document.getElementById(doc+'Pill').classList.add('hidden');
  document.getElementById(doc+'Dz').style.display = 'flex';
  checkReady();
}

/* TARGET MULTI-FILE LOGIC */
function tgtFileIn(e) {
  if(e.target.files.length) {
    for(let f of e.target.files) handleTgtFile(f);
  }
  e.target.value = '';
}
function handleTgtFile(f) {
  tgtFiles.push(f);
  renderTgtFiles();
  toast(f.name+' added to targets','success');
  checkReady();
  setStep(fileObjs.ref || tgtFiles.length ? 2 : 1);
}
function renderTgtFiles() {
  const container = document.getElementById('tgt-up');
  let html = tgtFiles.map((f, i) => `
    <div class="file-card-small">
      <div class="fc-ico">📄</div>
      <div class="fc-info">
        <div class="fc-name" title="${f.name}">${f.name}</div>
        <div class="fc-sz">${(f.size/1024).toFixed(0)} KB</div>
      </div>
      <button class="fc-rm" onclick="rmTgtFile(${i})">✕</button>
    </div>
  `).join('');
  
  html += `
    <label class="dz-square" id="tgtDz" ondragover="dzOv(event,'tgtDz')" ondragleave="dzLv('tgtDz')" ondrop="dzDp(event,'tgt')">
      <input type="file" multiple accept=".pdf,.doc,.docx,.txt" onchange="tgtFileIn(event)">
      <div class="dz-ico">➕</div>
      <div class="dz-t">Add Target</div>
    </label>
  `;
  container.innerHTML = html;
  container.classList.toggle('multi', tgtFiles.length > 0);
}
function rmTgtFile(i) {
  tgtFiles.splice(i, 1);
  renderTgtFiles();
  checkReady();
}

/* ════════════════════════════════════════
   TEXT INPUT + LANG DETECT
════════════════════════════════════════ */
function txtIn(doc) {
  const v = document.getElementById(doc+'Ta').value;
  document.getElementById(doc+'Cc').textContent = v.length+' chars';
  checkReady();
  
  if(isAutoLang && v.length > 30) {
    const dl = detectLang(v);
    if(dl) {
      document.getElementById(doc==='ref'?'refDetectedLang':'tgtDetectedLang').textContent = LANGS[dl]?.name || dl;
      document.getElementById(doc+'LangChip').classList.remove('hidden');
      if(doc==='tgt') updateDetectedLangDisplay(dl);
    }
  }
  if(doc==='tgt') liveUpdate();
}

function liveUpdate() {
  const r = document.getElementById('refTa').value.trim();
  const t = document.getElementById('tgtTa').value.trim();
  const el = document.getElementById('liveSim');
  if(!r||!t){el.classList.remove('show');return;}
  el.classList.add('show');
  const ta=r.toLowerCase().split(/\s+/), tb=t.toLowerCase().split(/\s+/);
  const sa=new Set(ta), sb=new Set(tb);
  let c=0; for(const w of sa)if(sb.has(w))c++;
  const s = Math.round(c/(sa.size+sb.size-c)*100) || 0;
  
  document.getElementById('liveV').textContent = s+'%';
  const fill = document.getElementById('liveF');
  fill.style.width = s+'%';
  fill.style.background = s>=80?'var(--score-hi)':s>=50?'var(--score-md)':'var(--score-lo)';
}

function resetAnalysisState() {
  if (hasAnalyzed) {
    hasAnalyzed = false;
    document.getElementById('resultCard').classList.remove('show', 'vis');
    setTimeout(() => { document.getElementById('resultCard').style.display = 'none'; }, 200);
    document.getElementById('actionCard').style.display = 'flex';
    document.getElementById('aBtnLbl').textContent = 'Analyze Again';
    document.querySelector('.ac-title').textContent = 'Documents Updated';
    document.querySelector('.ac-desc').textContent = 'You have modified the documents. Click below to run a new analysis.';
  }
}

function checkReady() {
  resetAnalysisState();
  
  const rOk = modes.ref==='upload'?!!fileObjs.ref:document.getElementById('refTa').value.trim().length>0;
  const tOk = modes.tgt==='upload'? tgtFiles.length > 0 : document.getElementById('tgtTa').value.trim().length>0;
  const btn = document.getElementById('aBtn');
  const lbl = document.getElementById('aBtnLbl');
  const acTitle = document.querySelector('.ac-title');
  const acDesc = document.querySelector('.ac-desc');
  
  btn.disabled = !(rOk&&tOk);

  if(!rOk && !tOk) { 
    acTitle.textContent = "Awaiting Documents"; 
    acDesc.textContent = "Upload reference and target documents to begin."; 
    lbl.textContent = 'Analyze Similarity';
  }
  else if(!rOk) { 
    acTitle.textContent = "Almost there"; 
    acDesc.textContent = "Please add a reference document to compare against."; 
    lbl.textContent = 'Analyze Similarity';
  }
  else if(!tOk) { 
    acTitle.textContent = "Reference Loaded"; 
    acDesc.textContent = "Now upload one or more target documents to analyze."; 
    lbl.textContent = 'Analyze Similarity';
  }
  else { 
    if (lbl.textContent !== 'Analyze Again') {
        acTitle.textContent = "Ready for Analysis"; 
        acDesc.textContent = "Documents loaded successfully. Click below to begin the deep scan."; 
        lbl.textContent = 'Analyze Similarity';
    }
    setStep(2); 
  }
}

/* ════════════════════════════════════════
   ANALYZE LOGIC
════════════════════════════════════════ */
function doAnalyze() {
  const btn=document.getElementById('aBtn'), lbl=document.getElementById('aBtnLbl');
  btn.disabled=true; lbl.innerHTML='<span class="spin">⟳</span> Analyzing…';
  setStep(3);
  hasAnalyzed = true;

  const rTxt = modes.ref==='text' ? document.getElementById('refTa').value : 'reference doc text for analysis';
  let tTxt = modes.tgt==='text' ? document.getElementById('tgtTa').value : 'target doc text combined analysis';
  if(modes.tgt === 'upload' && tgtFiles.length > 1) tTxt += ' combined multi files';

  const refLang = modes.ref==='text' ? detectLang(rTxt) : null;
  const tgtLang = modes.tgt==='text' ? detectLang(tTxt) : null;

  setTimeout(() => {
    const ta=rTxt.toLowerCase().split(/\s+/), tb=tTxt.toLowerCase().split(/\s+/);
    const sa=new Set(ta), sb=new Set(tb);
    let c=0; for(const w of sa)if(sb.has(w))c++;
    const sc = Math.round(c/(sa.size+sb.size-c)*100) || 0;
    
    // Fake phrases
    const ph = ["comprehensive examination", "theoretical frameworks", "empirical data"].slice(0, sc > 10 ? 3 : 1);
    
    document.getElementById('actionCard').style.display = 'none';
    showResult(sc, c, tb.length, ph, refLang, tgtLang);
    btn.disabled=false; lbl.textContent=T[uiLang].analyze_btn;
    
    if(loggedIn) {
      const tgtName = modes.tgt==='upload' ? (tgtFiles.length > 1 ? `${tgtFiles.length} files` : tgtFiles[0].name) : 'Target Text';
      histData.unshift({
        docs:(fileObjs.ref?.name||'Reference')+' → '+tgtName,
        date:new Date().toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'}),
        lang: refLang && tgtLang ? `${LANGS[refLang]?.name||refLang} → ${LANGS[tgtLang]?.name||tgtLang}` : isAutoLang ? 'Auto' : LANGS[manualLang]?.name,
        score:sc, verdict:sc>=80?'High':sc>=50?'Moderate':'Low'
      });
    }
    toast('Analysis complete','success');
  }, 1800);
}

function counterAnim(el, target) {
  let start = null;
  const duration = 1200;
  const step = ts => {
    if(!start) start = ts;
    const p = Math.min((ts-start)/duration, 1);
    el.textContent = Math.round((1-Math.pow(1-p,3))*target)+'%';
    if(p<1) requestAnimationFrame(step);
  };
  requestAnimationFrame(step);
}

function showResult(sc,mw,tw,ph,rl,tl) {
  const card = document.getElementById('resultCard');
  card.style.display='flex'; card.classList.add('rc','show');
  requestAnimationFrame(()=>requestAnimationFrame(()=>card.classList.add('vis')));

  const pctEl = document.getElementById('rcPct');
  counterAnim(pctEl, sc);
  
  document.getElementById('rsW').textContent = mw;
  document.getElementById('rsT').textContent = tw;
  document.getElementById('rsP').textContent = ph.length;

  const vd = document.getElementById('rcVerdict');
  if(sc>=80){vd.textContent='High Similarity';vd.className='rc-verdict v-hi';}
  else if(sc>=50){vd.textContent='Moderate Similarity';vd.className='rc-verdict v-md';}
  else{vd.textContent='Low Similarity / Original';vd.className='rc-verdict v-lo';}

  const fill=document.getElementById('rcBar');
  const color=sc>=80?'var(--score-hi)':sc>=50?'var(--score-md)':'var(--score-lo)';
  fill.style.background=color;
  pctEl.style.color = color;
  
  setTimeout(()=>{fill.style.width=sc+'%';},100);
  
  const exact = Math.floor(sc * 0.7);
  const para = Math.floor(sc * 0.25);
  const struct = sc > 0 ? Math.min(100, sc + 15) : 0;
  
  setTimeout(()=>{
    const exactEl = document.getElementById('aaExact');
    exactEl.style.width = exact+'%'; exactEl.textContent = exact+'%';
    exactEl.style.background = exact>=80?'#C62828':exact>=50?'#F9A825':'#2E7D32';
    
    const paraEl = document.getElementById('aaPara');
    paraEl.style.width = para+'%'; paraEl.textContent = para+'%';
    paraEl.style.background = para>=80?'#C62828':para>=50?'#F9A825':'#2E7D32';
    
    const structEl = document.getElementById('aaStruct');
    structEl.style.width = struct+'%'; structEl.textContent = struct+'%';
    structEl.style.background = struct>=80?'#C62828':struct>=50?'#F9A825':'#2E7D32';
  }, 300);

  const lrRow = document.getElementById('langResultRow');
  if(rl||tl) {
    const rlName = rl?(LANGS[rl]?.flag||'🌐')+' '+(LANGS[rl]?.name||rl):'Unknown';
    const tlName = tl?(LANGS[tl]?.flag||'🌐')+' '+(LANGS[tl]?.name||tl):'Unknown';
    document.getElementById('langResultText').innerHTML =
      `Language analysis: <strong>${rlName}</strong> ↔ <strong>${tlName}</strong>`;
    lrRow.classList.remove('hidden');
  } else lrRow.classList.add('hidden');

  const tags = document.getElementById('phTags');
  const blk = document.getElementById('phBlock');
  if(ph.length){tags.innerHTML=ph.map(p=>`<div class="ph-tag">"${p}"</div>`).join('');blk.style.display='block';}
  else blk.style.display='none';
}

/* ════════════════════════════════════════
   WEB SCAN
════════════════════════════════════════ */
function wsDrop(e,n){e.preventDefault();dzLv('wsDz'+n);if(e.dataTransfer.files[0])setWsFile(e.dataTransfer.files[0],n);}
function wsFile(e,n){if(e.target.files[0])setWsFile(e.target.files[0],n);}
function setWsFile(f,n){
  wsFiles[n]=f;
  document.getElementById('wsDz'+n).style.display = 'none';
  const pill=document.getElementById('wsPill'+n);
  pill.classList.remove('hidden');
  pill.innerHTML=`
    <div class="file-card-small">
      <div class="fc-ico">📄</div>
      <div class="fc-info">
        <div class="fc-name" title="${f.name}">${f.name}</div>
        <div class="fc-sz">${(f.size/1024).toFixed(0)} KB</div>
      </div>
      <button class="fc-rm" onclick="rmWsFile(${n})">✕</button>
    </div>
  `;
  
  const details = document.getElementById('wsDetailsInner');
  details.innerHTML = `<div class="ph-tag">File: ${f.name}</div><div class="ph-tag">Size: ${(f.size/1024).toFixed(0)} KB</div><div class="ph-tag">Status: Ready to scan</div>`;
  toast(f.name+' loaded','success');
}
function rmWsFile(n) {
  wsFiles[n]=null;
  document.getElementById('wsPill'+n).classList.add('hidden');
  document.getElementById('wsDz'+n).style.display = 'flex';
  document.getElementById('wsDetailsInner').innerHTML = 'Awaiting document upload';
}

function doScan() {
  if(!wsFiles[1]){ toast('Upload a document to scan','warn'); return; }
  const card = document.getElementById('scanCard'), rows = document.getElementById('scanRows');
  card.classList.add('show');
  rows.innerHTML = `<div class="load-state"><div class="load-ring"></div><div class="load-lbl">Scanning web sources…</div></div>`;
  setTimeout(()=>{
    const mock = [ {name: 'University_Archive.pdf', score: 85, tag:'High'}, {name: 'Public_Wiki_Article.docx', score:62, tag:'Moderate'}, {name: 'Generic_Template.txt', score:15, tag:'Low'} ];
    rows.innerHTML = mock.map(r=>{
      const c = r.score>=80 ? 'var(--score-hi)' : r.score>=50 ? 'var(--score-md)' : 'var(--score-lo)';
      const bg = r.score>=80 ? 'rgba(198,40,40,.1)' : r.score>=50 ? 'rgba(249,168,37,.1)' : 'rgba(46,125,50,.1)';
      return `<div class="scan-row">
        <div class="sr-doc"><div class="sr-ico">📄</div><span class="sr-name">${r.name}</span></div>
        <div class="sr-bar"><div class="sr-bf" style="width:0%;background:${c}" data-w="${r.score}"></div></div>
        <span class="sr-pct" style="color:${c}">${r.score}%</span>
        <span class="sr-tag" style="background:${bg};color:${c};border:1px solid ${c}33">${r.tag}</span>
      </div>`;
    }).join('');
    setTimeout(()=>document.querySelectorAll('.sr-bf').forEach(el=>{ el.style.transition='width .9s var(--ease)'; el.style.width = el.dataset.w + '%'; }), 60);
    toast('Web Scan complete','success');
  }, 1600);
}

/* ════════════════════════════════════════
   HISTORY
════════════════════════════════════════ */
function renderHistory(){
  if(!loggedIn){
    document.getElementById('guestW').style.display='block';
    document.getElementById('histW').classList.add('hidden');return;
  }
  document.getElementById('guestW').style.display='none';
  document.getElementById('histW').classList.remove('hidden');
  const rows=histData.length?histData:[
    {docs:'Report_final.pdf → Source.pdf',date:'Feb 12, 2026',lang:'English',score:84,verdict:'High'},
    {docs:'Essay.docx → Target Text',date:'Feb 10, 2026',lang:'Español',score:65,verdict:'Moderate'},
    {docs:'Draft_v2.pdf → Original.pdf',date:'Feb 05, 2026',lang:'Français',score:22,verdict:'Low'},
  ];
  document.getElementById('histBody').innerHTML=rows.map(r=>{
    const cl=r.score>=80?'hi':r.score>=50?'md':'lo';
    const vbg=r.score>=80?'background:rgba(198,40,40,.1);color:var(--score-hi);border:1px solid rgba(198,40,40,.3)':
               r.score>=50?'background:rgba(249,168,37,.1);color:var(--score-md);border:1px solid rgba(249,168,37,.3)':
                           'background:rgba(46,125,50,.1);color:var(--score-lo);border:1px solid rgba(46,125,50,.3)';
    return`<tr><td class="td-d">${r.docs}</td><td class="td-dt">${r.date}</td>
      <td style="font-size:.8rem;color:var(--muted);">${r.lang||'English'}</td>
      <td class="td-sc ${cl}">${r.score}%</td>
      <td><span class="td-b" style="${vbg}">${r.verdict}</span></td></tr>`;
  }).join('');
}

/* ════════════════════════════════════════
   AI SUMMARIZE
════════════════════════════════════════ */
function aiDrop(e){e.preventDefault();if(e.dataTransfer.files[0])setAi(e.dataTransfer.files[0]);}
function aiFile(e){if(e.target.files[0])setAi(e.target.files[0]);}
function aiImageFile(e){ if(e.target.files && e.target.files[0]){ setAi(e.target.files[0]); } }
function setAi(f){
  aiFileObj=f;
  const pill = document.getElementById('aiPill');
  pill.classList.remove('hidden');
  pill.innerHTML=`
    <div class="file-card-small">
      <div class="fc-ico">${aiMode==='image'?'🖼️':'📄'}</div>
      <div class="fc-info">
        <div class="fc-name" title="${f.name}">${f.name}</div>
        <div class="fc-sz">${(f.size/1024).toFixed(0)} KB</div>
      </div>
      <button class="fc-rm" onclick="clearAi()">✕</button>
    </div>
  `;
  
  document.getElementById('aiDocArea').style.display = 'none';
  document.getElementById('aiImageArea').style.display = 'none';
  toast(f.name+' ready','info');
}
function clearAi(){
  aiFileObj=null;
  document.getElementById('aiPill').classList.add('hidden');
  setAiMode(aiMode); // restore dropzone
}

function doSummarize(){
  if(!aiFileObj){toast('Upload a document or image first','warn');return;}
  const card=document.getElementById('sumCard');
  document.getElementById('sumDoc').textContent=aiFileObj.name;
  card.classList.add('show');
  document.getElementById('sumLoad').style.display='block';
  document.getElementById('sumBody').classList.add('hidden');

  let ov = 'This document presents a comprehensive examination of the subject matter, integrating theoretical frameworks with empirical data.';
  let kp = ['Opening section clearly articulates the central thesis','Methodology described with sufficient detail','Empirical findings presented with context'];
  let co = 'The document successfully accomplishes its stated objectives.';

  if(aiMode === 'image' || aiImageOption){
    ov = 'Visual & Textual Analysis: Detected objects, scene context, and OCR derived from the image elements.';
    kp = ['Detected primary subjects: Document forms','Extracted text snippets (OCR): "Confidential", "Draft"','Dominant palette: High contrast monochrome'];
    co = 'The visual evidence supports the structural layout of a standard formal report.';
  }

  setTimeout(()=>{
    document.getElementById('sumLoad').style.display='none';
    document.getElementById('sumBody').classList.remove('hidden');
    typeIn(document.getElementById('sumOv'),ov,10);
    document.getElementById('sumKP').innerHTML=kp.map((p,i)=>`<div class="kp"><span class="kp-n">${i+1}</span><span>${p}</span></div>`).join('');
    setTimeout(()=>typeIn(document.getElementById('sumCo'),co,12),400);
    toast('Summary generated','success');
  },1500);
}

function typeIn(el,txt,ms){
  el.textContent='';let i=0;
  const iv=setInterval(()=>{el.textContent+=txt[i++];if(i>=txt.length)clearInterval(iv);},ms);
}
function setAiMode(m){ 
  aiMode = m; 
  if(!aiFileObj) {
    document.getElementById('aiDocArea').style.display = m==='doc' ? 'flex' : 'none'; 
    document.getElementById('aiImageArea').style.display = m==='image' ? 'flex' : 'none'; 
  }
  document.getElementById('amDoc').classList.toggle('on', m==='doc'); 
  document.getElementById('amImage').classList.toggle('on', m==='image'); 
}
function toggleAiSettings(){ const p=document.getElementById('aiSettingsPanel'); p.classList.toggle('hidden'); }

/* ════════════════════════════════════════
   PROFILE & MODAL
════════════════════════════════════════ */
function renderProfileMenu() {
  const m = document.getElementById('profileMenu');
  const av = document.getElementById('profileAvatar');
  if (!loggedIn) {
    av.src = 'https://ui-avatars.com/api/?name=Guest&background=eadecd&color=0d2818&rounded=true';
    m.innerHTML = `
      <div class="pm-item" onclick="openAuthModal('login')">🔑 Login</div>
      <div class="pm-item" onclick="showPage('history')">📜 Doc History</div>
      <div class="pm-item" onclick="openSettings()">⚙️ Settings</div>
    `;
  } else {
    av.src = 'https://ui-avatars.com/api/?name=User&background=245c3a&color=f5f0e8&rounded=true';
    m.innerHTML = `
      <div class="pm-item" style="color:var(--danger)" onclick="doLogout()">🚪 Logout</div>
      <div class="pm-item" onclick="showPage('history')">📜 Doc History</div>
      <div class="pm-item" onclick="openSettings()">⚙️ Settings</div>
    `;
  }
}

function doLogout() {
  loggedIn = false;
  renderProfileMenu();
  document.getElementById('profileMenu').classList.remove('show');
  toast('Logged out successfully', 'success');
  if(document.getElementById('history').classList.contains('active')) {
    showPage('home'); 
  }
}

function toggleProfileMenu(){ const m=document.getElementById('profileMenu'); if(m) m.classList.toggle('show'); }
window.addEventListener('click', e=>{ 
  const m=document.getElementById('profileMenu'), av=document.getElementById('profileAvatar'); 
  if(m && e.target!==av && !m.contains(e.target)) m.classList.remove('show'); 
});

function openAuthModal(mode){
  document.getElementById('mBg').classList.add('open');
  document.getElementById('profileMenu').classList.remove('show');
  switchModalTab(mode);
}
function closeModal(){document.getElementById('mBg').classList.remove('open');}
function bgCl(e){if(e.target.id==='mBg')closeModal();}

function switchModalTab(mode) {
  const isLogin = mode === 'login';
  document.getElementById('tabLogin').classList.toggle('active', isLogin);
  document.getElementById('tabSignup').classList.toggle('active', !isLogin);
  
  document.getElementById('mTitle').textContent = isLogin ? 'Welcome back' : 'Create an account';
  document.getElementById('mSub').textContent = isLogin ? 'Sign in to your DocxCheck account' : 'Start comparing documents for free';
  
  const viewL = document.getElementById('viewLogin'), viewS = document.getElementById('viewSignup');
  if(isLogin) {
    viewL.classList.remove('exit-left'); viewL.classList.add('active');
    viewS.classList.remove('active'); 
  } else {
    viewL.classList.add('exit-left'); viewL.classList.remove('active');
    viewS.classList.add('active');
  }
}

function doLogin(){
  loggedIn=true;
  closeModal();
  renderProfileMenu();
  toast('Authentication successful!','success');
  if(document.getElementById('history').classList.contains('active')) { renderHistory(); }
}
function openSettings(){ toast('Settings opened','info'); document.getElementById('profileMenu').classList.remove('show'); }

/* ════════════════════════════════════════
   TOAST
════════════════════════════════════════ */
function toast(msg,type='info'){
  const area=document.getElementById('toastArea');
  const t=document.createElement('div');
  const ico={success:'✓',warn:'⚠',info:'•'};
  t.className=`toast t${type[0]}`;
  t.innerHTML=`<span>${ico[type]||'•'}</span>${msg}`;
  area.appendChild(t);
  requestAnimationFrame(()=>requestAnimationFrame(()=>t.classList.add('in')));
  setTimeout(()=>{t.classList.remove('in');t.classList.add('out');setTimeout(()=>t.remove(),500);},3200);
}

/* ════════════════════════════════════════
   INIT
════════════════════════════════════════ */
buildDocLangPills();
buildTicker();
renderProfileMenu();
checkReady();
showPage('landing');
</script>
</body>
</html>